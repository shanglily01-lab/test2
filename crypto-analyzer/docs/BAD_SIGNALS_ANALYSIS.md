# åƒåœ¾ä¿¡å·åˆ†æä¸ä¼˜åŒ–å»ºè®®

> åˆ†ææ—¶é—´: 2026-02-02
> æ•°æ®æ¥æº: UTC 07:00ä¹‹åçš„Uæœ¬ä½è®¢å•
> è´¦æˆ·: Account 2 (Uæœ¬ä½åˆçº¦)

---

## ä¸€ã€åƒåœ¾ä¿¡å·åˆ—è¡¨

### ğŸ—‘ï¸ æœ€å·®ä¿¡å·æ’å

| æ’å | ä¿¡å·ç»„åˆ | æ–¹å‘ | æ•°é‡ | èƒœç‡ | æ€»ç›ˆäº | è¯„çº§ |
|-----|---------|------|------|------|--------|------|
| 1 | æ¶¨åŠ¿3%+ä¸­ä½ | LONG | 21ç¬” | 23.8% | **-$455.55** | â˜ ï¸ æå·® |
| 2 | æœªçŸ¥ | LONG | 13ç¬” | 30.8% | -$89.26 | ğŸ—‘ï¸ å¾ˆå·® |
| 3 | breakdown_short+è·ŒåŠ¿3%+1Dçœ‹è·Œ+volume_power_bear | SHORT | 11ç¬” | 63.6% | **+$147.57** | âœ… è‰¯å¥½ |
| 4 | breakdown_short+è·ŒåŠ¿3%+volume_power_bear | SHORT | 12ç¬” | 41.7% | -$8.67 | âš ï¸ ä¸­ç­‰ |
| 5 | æ¶¨åŠ¿3%+ä¸­ä½+volume_power_1h_bull | LONG | 9ç¬” | 44.4% | -$25.46 | âš ï¸ åå·® |

---

## äºŒã€é—®é¢˜åˆ†æ

### é—®é¢˜1: "æ¶¨åŠ¿3%+ä¸­ä½" ä¿¡å· (æœ€å·®)

#### ä¿¡å·ç»„æˆ
```
momentum_up_3pct (æ¶¨åŠ¿3%) + position_mid (ä¸­ä½)
```

#### é—®é¢˜è¯Šæ–­
1. âš ï¸ **è¿½é«˜é£é™©**: 5Mæ¶¨å¹…>3%å·²ç»æ˜¯çŸ­æœŸæš´æ¶¨ï¼Œå®¹æ˜“è¿½åœ¨é«˜ç‚¹
2. âš ï¸ **ç¼ºä¹è¶‹åŠ¿æ”¯æ’‘**: ä»…æœ‰position_mid (5åˆ†)ï¼Œæ²¡æœ‰1Hè¶‹åŠ¿ç¡®è®¤
3. âš ï¸ **ç¼ºä¹é‡èƒ½æ”¯æ’‘**: æ²¡æœ‰volume_poweræ”¯æ’‘
4. âš ï¸ **è¯„åˆ†è¿‡ä½**: momentum_up_3pct (15åˆ†) + position_mid (5åˆ†) = **ä»…20åˆ†** < 35åˆ†é˜ˆå€¼

#### æ ¹æœ¬åŸå› 
**è¿™ä¸ªä¿¡å·ä¸åº”è¯¥è§¦å‘å¼€ä»“ï¼**
- è¯„åˆ†20åˆ† < 35åˆ†é˜ˆå€¼
- è¯´æ˜ç³»ç»Ÿå­˜åœ¨Bugï¼Œæˆ–è€…æœ‰å…¶ä»–æœªè®°å½•çš„ä¿¡å·ç»„ä»¶

#### å»ºè®®æªæ–½
1. ğŸš« **ç«‹å³åŠ å…¥ä¿¡å·é»‘åå•**
2. ğŸ” **æ’æŸ¥ä»£ç **: ä¸ºä»€ä¹ˆè¯„åˆ†<35åˆ†è¿˜å¼€ä»“äº†ï¼Ÿ
3. ğŸ“Š **å¢åŠ éªŒè¯**: æ£€æŸ¥æ‰€æœ‰å†å²è®¢å•çš„è¯„åˆ†æ˜¯å¦>=35

---

### é—®é¢˜2: "æœªçŸ¥" ä¿¡å·

#### é—®é¢˜è¯Šæ–­
- âŒ **æ•°æ®ç¼ºå¤±**: `entry_signal_type` ä¸ºç©ºæˆ–æœªè®°å½•
- âŒ **ç³»ç»ŸBug**: å¼€ä»“æ—¶æœªæ­£ç¡®è®°å½•ä¿¡å·ç±»å‹
- âŒ **13ç¬”äº¤æ˜“å®Œå…¨æ˜¯é»‘ç›’**

#### å»ºè®®æªæ–½
1. ğŸ” **ä»£ç å®¡æŸ¥**: ç¡®ä¿æ‰€æœ‰å¼€ä»“éƒ½è®°å½•signal_type
2. ğŸ“ **è¡¥å……æ—¥å¿—**: è®°å½•å®Œæ•´çš„signal_components
3. ğŸš« **å¦‚æœæ— æ³•ä¿®å¤ï¼Œç¦æ­¢å¼€ä»“**

---

### é—®é¢˜3: åŒ…å«"1Dçœ‹è·Œ"çš„ä¿¡å· (å·²ç§»é™¤)

#### ä¿¡å·ç»„æˆ
```
breakdown_short + momentum_down_3pct + trend_1d_bear + volume_power_bear
```

#### é—®é¢˜
- âœ… **è¡¨ç°è‰¯å¥½**: 11ç¬”, 63.6%èƒœç‡, +$147.57
- âŒ **ä½†å·²ç§»é™¤**: æ˜¨æ™šä¼˜åŒ–æ—¶ç§»é™¤äº†trend_1d_bearä¿¡å·
- âš ï¸ **æ— æ³•å†å¤ç°**: è¿™æ˜¯å†å²é—ç•™ä¿¡å·

#### è¯´æ˜
è¿™ä¸ªä¿¡å·è¡¨ç°å¥½ï¼Œä½†å› ä¸ºåŒ…å«1Dä¿¡å·ï¼ˆæŒä»“4å°æ—¶ä¸éœ€è¦1Dè¶‹åŠ¿ï¼‰ï¼Œå·²è¢«ç³»ç»Ÿä¼˜åŒ–ç§»é™¤ã€‚

---

### é—®é¢˜4: "æ¶¨åŠ¿3%+ä¸­ä½+volume_power_1h_bull"

#### ä¿¡å·ç»„æˆ
```
momentum_up_3pct (15åˆ†) + position_mid (5åˆ†) + volume_power_1h_bull (15åˆ†) = 35åˆ†
```

#### é—®é¢˜è¯Šæ–­
1. âš ï¸ **åˆšå¥½è¾¾åˆ°é˜ˆå€¼**: 35åˆ†åˆšå¥½åŠæ ¼ï¼Œè´¨é‡ä¸é«˜
2. âš ï¸ **è¿½é«˜+çŸ­æœŸé‡èƒ½**: å®¹æ˜“åœ¨çŸ­æœŸå†²é«˜åå›è½
3. âš ï¸ **ç¼ºä¹è¶‹åŠ¿**: æ²¡æœ‰1Hè¶‹åŠ¿ç¡®è®¤
4. âš ï¸ **èƒœç‡44.4%**: ç•¥ä½äº50%

#### å»ºè®®
- æé«˜å¼€ä»“é˜ˆå€¼åˆ° **40åˆ†** (ä»35åˆ†æé«˜)
- æˆ–è€…å¢åŠ trend_1h_bullä½œä¸ºå¿…è¦æ¡ä»¶

---

## ä¸‰ã€æ ¹æœ¬é—®é¢˜ï¼šmomentum_up_3pct (æ¶¨åŠ¿3%) çš„æ»¥ç”¨

### æ•°æ®ç»Ÿè®¡
åŒ…å« `momentum_up_3pct` çš„ä¿¡å·:
- "æ¶¨åŠ¿3%+ä¸­ä½": 21ç¬”, 23.8%èƒœç‡, **-$455.55**
- "æ¶¨åŠ¿3%+ä¸­ä½+volume_power_1h_bull": 9ç¬”, 44.4%èƒœç‡, -$25.46

**åˆè®¡**: 30ç¬”, 32.3%å¹³å‡èƒœç‡, **-$481.01æ€»äºæŸ**

### é—®é¢˜åˆ†æ
1. âš ï¸ **5Mæ¶¨å¹…>3%æ˜¯æ»åä¿¡å·**: ç­‰çœ‹åˆ°3%æ¶¨å¹…æ—¶ï¼Œå¾€å¾€å·²ç»æ¶¨å®Œäº†
2. âš ï¸ **å®¹æ˜“è¿½é«˜**: æ•£æˆ·æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯å°±æ˜¯è¿½æ¶¨
3. âš ï¸ **ç¼ºä¹å›è°ƒæœºä¼š**: æ²¡æœ‰ç»™å¥½çš„å…¥åœºç‚¹
4. âš ï¸ **ä¸Big4å†²çª**: å¦‚æœBig4çœ‹ç©ºï¼Œè¿™ç§è¿½æ¶¨æ›´å±é™©

### å»ºè®®ä¼˜åŒ–

#### æ–¹æ¡ˆ1: æé«˜momentum_up_3pctçš„é…åˆè¦æ±‚
```python
# å½“å‰æƒé‡
'momentum_up_3pct': {'long': 15, 'short': 0}

# ä¼˜åŒ–å: é™ä½æƒé‡ï¼Œéœ€è¦æ›´å¤šä¿¡å·é…åˆ
'momentum_up_3pct': {'long': 10, 'short': 0}  # ä»15é™åˆ°10

# æˆ–è€…æ·»åŠ å¿…è¦é…åˆæ¡ä»¶
if 'momentum_up_3pct' in signals:
    # å¿…é¡»åŒæ—¶æ»¡è¶³:
    # 1. æœ‰1Hè¶‹åŠ¿æ”¯æ’‘ (trend_1h_bull)
    # 2. æœ‰é‡èƒ½æ”¯æ’‘ (volume_power_bullæˆ–volume_power_1h_bull)
    # 3. ä¸åœ¨é«˜ä½ (position < 70%)
```

#### æ–¹æ¡ˆ2: åŠ å…¥ä¿¡å·é»‘åå•
```sql
INSERT INTO signal_blacklist (signal_type, position_side, reason) VALUES
('momentum_up_3pct', 'LONG', 'è¿½é«˜é£é™©é«˜ï¼Œ30ç¬”äº¤æ˜“èƒœç‡ä»…32.3%ï¼ŒäºæŸ$481'),
('momentum_down_3pct', 'SHORT', 'è¿½ç©ºé£é™©(å¾…è§‚å¯Ÿ)');
```

#### æ–¹æ¡ˆ3: æé«˜å¼€ä»“é˜ˆå€¼
```python
# å½“å‰é˜ˆå€¼
self.threshold = 35  # åˆ†

# ä¼˜åŒ–å
self.threshold = 40  # æé«˜åˆ°40åˆ†ï¼Œè¿‡æ»¤ä½è´¨é‡ä¿¡å·
```

---

## å››ã€ä¼˜åŒ–å»ºè®®æ€»ç»“

### ğŸš¨ ç«‹å³æ‰§è¡Œï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

1. **æ’æŸ¥Bug**: ä¸ºä»€ä¹ˆè¯„åˆ†<35çš„ä¿¡å·ä¼šå¼€ä»“ï¼Ÿ
   ```python
   # æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦æœ‰ç»•è¿‡é˜ˆå€¼çš„é€»è¾‘
   if score >= self.threshold:  # åº”è¯¥æ˜¯ >=ï¼Œä¸æ˜¯ >
       open_position()
   ```

2. **åŠ å…¥ä¿¡å·é»‘åå•**
   ```sql
   -- ç¦ç”¨åƒåœ¾ä¿¡å·ç»„åˆ
   INSERT INTO signal_blacklist (signal_type, position_side, reason, is_active)
   VALUES
   ('momentum_up_3pct+position_mid', 'LONG',
    '21ç¬”äº¤æ˜“èƒœç‡23.8%ï¼ŒäºæŸ$455.55ï¼Œè¿½é«˜é£é™©æé«˜', TRUE),
   ('momentum_up_3pct', 'LONG',
    '30ç¬”äº¤æ˜“åˆè®¡èƒœç‡32.3%ï¼ŒäºæŸ$481.01ï¼Œéœ€é…åˆå¼ºè¶‹åŠ¿', TRUE);
   ```

3. **ä¿®å¤"æœªçŸ¥"ä¿¡å·**: ç¡®ä¿æ‰€æœ‰å¼€ä»“éƒ½è®°å½•signal_type

### âš™ï¸ å‚æ•°è°ƒä¼˜ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

4. **é™ä½momentumæƒé‡**
   ```python
   'momentum_up_3pct': {'long': 10, 'short': 0}    # ä»15é™åˆ°10
   'momentum_down_3pct': {'long': 0, 'short': 10}  # ä»15é™åˆ°10
   ```

5. **æé«˜å¼€ä»“é˜ˆå€¼**
   ```python
   self.threshold = 40  # ä»35æé«˜åˆ°40
   ```

6. **å¢åŠ momentumçš„é…åˆæ¡ä»¶**
   - å¿…é¡»æœ‰trend_1hæ”¯æ’‘
   - å¿…é¡»æœ‰volume_poweræ”¯æ’‘
   - å¿…é¡»é€šè¿‡Big4è¿‡æ»¤

### ğŸ“Š ç›‘æ§ä¼˜åŒ–ï¼ˆä½ä¼˜å…ˆçº§ï¼‰

7. **ç»Ÿè®¡åˆ†æ**: æ¯æ—¥ç»Ÿè®¡å„ä¿¡å·ç»„åˆè¡¨ç°
8. **è‡ªåŠ¨ç¦ç”¨**: è¿ç»­5ç¬”äºæŸæˆ–èƒœç‡<30%è‡ªåŠ¨åŠ å…¥é»‘åå•
9. **A/Bæµ‹è¯•**: å¯¹æ¯”ä¼˜åŒ–å‰åçš„èƒœç‡å˜åŒ–

---

## äº”ã€é¢„æœŸæ•ˆæœ

### ä¼˜åŒ–å‰ï¼ˆå½“å‰ï¼‰
- momentum_up_3pctç›¸å…³: 30ç¬”, 32.3%èƒœç‡, -$481.01
- å¹³å‡å•ç¬”äºæŸ: **-$16.03**

### ä¼˜åŒ–åï¼ˆé¢„æœŸï¼‰
- è¿‡æ»¤æ‰ä½è´¨é‡momentumä¿¡å·
- é¢„æœŸå‡å°‘20-25ç¬”åƒåœ¾äº¤æ˜“
- é¢„æœŸèŠ‚çœäºæŸ: **$300-400**
- æ•´ä½“èƒœç‡æå‡: 5-10%

---

## å…­ã€å®æ–½è®¡åˆ’

### Phase 1: ç´§æ€¥ä¿®å¤ï¼ˆä»Šå¤©ï¼‰
- [ ] æ’æŸ¥è¯„åˆ†<35å¼€ä»“çš„Bug
- [ ] åŠ å…¥signal_blacklist: momentum_up_3pct+position_mid
- [ ] ä¿®å¤"æœªçŸ¥"ä¿¡å·çš„è®°å½•é—®é¢˜

### Phase 2: å‚æ•°ä¼˜åŒ–ï¼ˆæ˜å¤©ï¼‰
- [ ] é™ä½momentumæƒé‡: 15 â†’ 10
- [ ] æé«˜å¼€ä»“é˜ˆå€¼: 35 â†’ 40
- [ ] æ·»åŠ momentumé…åˆæ¡ä»¶éªŒè¯

### Phase 3: ç›‘æ§éªŒè¯ï¼ˆæœ¬å‘¨ï¼‰
- [ ] è§‚å¯Ÿæ–°å‚æ•°ä¸‹çš„äº¤æ˜“è¡¨ç°
- [ ] ç»Ÿè®¡ä¼˜åŒ–å‰åçš„å¯¹æ¯”æ•°æ®
- [ ] æ ¹æ®åé¦ˆç»§ç»­è°ƒæ•´

---

## ä¸ƒã€ä»£ç ä¿®æ”¹ç¤ºä¾‹

### ä¿®æ”¹1: åŠ å…¥ä¿¡å·é»‘åå•æ£€æŸ¥
```python
# smart_trader_service.py - analyze()æ–¹æ³•ä¸­

# åœ¨ç”Ÿæˆä¿¡å·åï¼Œæ£€æŸ¥é»‘åå•
def _check_signal_blacklist(self, symbol: str, side: str, signal_components: dict) -> bool:
    """æ£€æŸ¥ä¿¡å·æ˜¯å¦åœ¨é»‘åå•ä¸­"""

    # æ£€æŸ¥å•ä¸ªä¿¡å·
    for signal in signal_components.keys():
        if self.signal_blacklist.get(signal, {}).get(side):
            logger.info(f"[BLACKLIST] {symbol} {side}: {signal} åœ¨é»‘åå•ä¸­")
            return False

    # æ£€æŸ¥ä¿¡å·ç»„åˆ
    signal_combo = '+'.join(sorted(signal_components.keys()))
    if self.signal_blacklist.get(signal_combo, {}).get(side):
        logger.info(f"[BLACKLIST] {symbol} {side}: ä¿¡å·ç»„åˆ {signal_combo} åœ¨é»‘åå•ä¸­")
        return False

    return True
```

### ä¿®æ”¹2: é™ä½momentumæƒé‡
```python
# smart_trader_service.py - SmartDecisionBrain.__init__()

self.scoring_weights = {
    # ... å…¶ä»–æƒé‡ ...
    'momentum_down_3pct': {'long': 0, 'short': 10},   # ä»15é™åˆ°10
    'momentum_up_3pct': {'long': 10, 'short': 0},     # ä»15é™åˆ°10
    # ... å…¶ä»–æƒé‡ ...
}
```

### ä¿®æ”¹3: æé«˜é˜ˆå€¼
```python
# smart_trader_service.py - SmartDecisionBrain.__init__()

self.threshold = 40  # ä»35æé«˜åˆ°40åˆ†
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2026-02-02
**ç»´æŠ¤è€…**: Claude Sonnet 4.5
