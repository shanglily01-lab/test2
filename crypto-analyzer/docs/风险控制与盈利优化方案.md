# åŠ å¯†è´§å¸äº¤æ˜“ç³»ç»Ÿ - é£é™©æ§åˆ¶ä¸ç›ˆåˆ©ä¼˜åŒ–æ–¹æ¡ˆ

## æ–‡æ¡£æ¦‚è¿°

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2025-11-11
**ç›®æ ‡**: é€šè¿‡å¤šç»´åº¦é£é™©æ§åˆ¶å’Œæ™ºèƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œå®ç°**æœ€å¤§ç›ˆåˆ©**å’Œ**æœ€å°é£é™©**

---

## ç›®å½•

1. [æ ¸å¿ƒåŸåˆ™](#1-æ ¸å¿ƒåŸåˆ™)
2. [å…³é”®æŒ‡æ ‡ç›‘æ§ä½“ç³»](#2-å…³é”®æŒ‡æ ‡ç›‘æ§ä½“ç³»)
3. [å¤šç»´åº¦ä¿¡å·ç¡®è®¤æœºåˆ¶](#3-å¤šç»´åº¦ä¿¡å·ç¡®è®¤æœºåˆ¶)
4. [åŠ¨æ€ä»“ä½ç®¡ç†ç³»ç»Ÿ](#4-åŠ¨æ€ä»“ä½ç®¡ç†ç³»ç»Ÿ)
5. [æ™ºèƒ½æ­¢æŸæ­¢ç›ˆç­–ç•¥](#5-æ™ºèƒ½æ­¢æŸæ­¢ç›ˆç­–ç•¥)
6. [é£é™©è¯„ä¼°ä¸é¢„è­¦ç³»ç»Ÿ](#6-é£é™©è¯„ä¼°ä¸é¢„è­¦ç³»ç»Ÿ)
7. [ç›ˆåˆ©ä¼˜åŒ–ç­–ç•¥](#7-ç›ˆåˆ©ä¼˜åŒ–ç­–ç•¥)
8. [æç«¯è¡Œæƒ…åº”å¯¹](#8-æç«¯è¡Œæƒ…åº”å¯¹)
9. [å®æ—¶ç›‘æ§æŒ‡æ ‡](#9-å®æ—¶ç›‘æ§æŒ‡æ ‡)
10. [å®æ–½å»ºè®®](#10-å®æ–½å»ºè®®)

---

## 1. æ ¸å¿ƒåŸåˆ™

### 1.1 é£é™©æ§åˆ¶ä¼˜å…ˆ

**ç¬¬ä¸€åŸåˆ™**: ä¿æŠ¤æœ¬é‡‘ > è¿½æ±‚æ”¶ç›Š

```
é£é™©ç®¡ç†é‡‘å­—å¡”:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     è¿½æ±‚æ”¶ç›Šï¼ˆé¡¶å±‚ï¼‰              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     æé«˜èƒœç‡ï¼ˆä¸­å±‚ï¼‰              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¿æŠ¤æœ¬é‡‘ - ä¸¥æ ¼æ­¢æŸï¼ˆåº•å±‚ï¼‰      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç†å¿µ**:
- å®å¯é”™è¿‡æœºä¼šï¼Œä¸å¯å†’é™©äºæŸ
- å°æŸå¤±å¯ä»¥æ¥å—ï¼Œå¤§æŸå¤±ç»ä¸å…è®¸
- å•ç¬”äºæŸä¸è¶…è¿‡è´¦æˆ·çš„ 2-5%
- è¿ç»­äºæŸç«‹å³é™ä½ä»“ä½æˆ–æš‚åœäº¤æ˜“

### 1.2 å¤šé‡ç¡®è®¤åŸåˆ™

**å•ä¸€ä¿¡å·ä¸å¯é ï¼Œå¿…é¡»å¤šç»´åº¦ç¡®è®¤**

**ç¡®è®¤å±‚çº§**:
```
Level 1: æŠ€æœ¯æŒ‡æ ‡ç¡®è®¤ (è‡³å°‘3ä¸ªæŒ‡æ ‡åŒå‘)
    â†“
Level 2: èµ„é‡‘æµå‘ç¡®è®¤ (èªæ˜é’±/ETF/èµ„é‡‘è´¹ç‡)
    â†“
Level 3: æˆäº¤é‡ç¡®è®¤ (æ”¾é‡çªç ´)
    â†“
Level 4: é£é™©è¯„ä¼°é€šè¿‡ (æ— æç«¯é£é™©)
    â†“
æ‰§è¡Œäº¤æ˜“
```

**åªæœ‰é€šè¿‡æ‰€æœ‰å±‚çº§ç¡®è®¤ï¼Œæ‰èƒ½æ‰§è¡Œäº¤æ˜“**

### 1.3 æ¦‚ç‡ä¼˜åŠ¿åŸåˆ™

**é«˜èƒœç‡ Ã— é«˜ç›ˆäºæ¯” = é•¿æœŸç›ˆåˆ©**

**æœŸæœ›æ”¶ç›Šå…¬å¼**:
```
E = (P_win Ã— R_win) - (P_loss Ã— R_loss)

å…¶ä¸­:
E = æœŸæœ›æ”¶ç›Š
P_win = èƒœç‡
R_win = å¹³å‡ç›ˆåˆ©
P_loss = è´¥ç‡ (1 - P_win)
R_loss = å¹³å‡äºæŸ
```

**ç›®æ ‡è®¾å®š**:
- æœ€ä½èƒœç‡è¦æ±‚: 55%
- æœ€ä½ç›ˆäºæ¯”è¦æ±‚: 2:1
- ç†æƒ³çŠ¶æ€: èƒœç‡ 65%ï¼Œç›ˆäºæ¯” 3:1

---

## 2. å…³é”®æŒ‡æ ‡ç›‘æ§ä½“ç³»

### 2.1 å¿…é¡»ç›‘æ§çš„æŠ€æœ¯æŒ‡æ ‡

#### 2.1.1 è¶‹åŠ¿ç±»æŒ‡æ ‡

**1. EMA (æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿) ç»„åˆ**

**ç›‘æ§é…ç½®**:
```yaml
ema_fast: 12      # çŸ­æœŸè¶‹åŠ¿
ema_medium: 26    # ä¸­æœŸè¶‹åŠ¿
ema_slow: 50      # é•¿æœŸè¶‹åŠ¿
ema_trend: 200    # ä¸»è¶‹åŠ¿
```

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **EMA å¤šå¤´æ’åˆ—** (12 > 26 > 50 > 200): å¼ºçƒˆçœ‹æ¶¨
- âŒ **EMA ç©ºå¤´æ’åˆ—** (12 < 26 < 50 < 200): å¼ºçƒˆçœ‹è·Œ
- âš ï¸ **EMA ç¼ ç»•** (å‡çº¿é—´è· < 2%): éœ‡è¡å¸‚ï¼Œé¿å…äº¤æ˜“
- ğŸ”” **é‡‘å‰/æ­»å‰** (12/26äº¤å‰): é‡è¦ä¿¡å·ç¡®è®¤ç‚¹

**é£é™©æ§åˆ¶**:
```python
def check_ema_trend(ema_12, ema_26, ema_50, ema_200):
    # è®¡ç®—å‡çº¿é—´è·æ¯”ä¾‹
    spread_12_26 = abs(ema_12 - ema_26) / ema_26
    spread_26_50 = abs(ema_26 - ema_50) / ema_50

    # é—´è·å¤ªå° = éœ‡è¡å¸‚ï¼Œä¸äº¤æ˜“
    if spread_12_26 < 0.01 or spread_26_50 < 0.01:
        return "éœ‡è¡å¸‚", "é¿å…äº¤æ˜“"

    # å¤šå¤´æ’åˆ—
    if ema_12 > ema_26 > ema_50 > ema_200:
        return "å¼ºåŠ¿å¤šå¤´", "å¯åšå¤š"

    # ç©ºå¤´æ’åˆ—
    if ema_12 < ema_26 < ema_50 < ema_200:
        return "å¼ºåŠ¿ç©ºå¤´", "å¯åšç©º"

    return "æ–¹å‘ä¸æ˜", "è§‚æœ›"
```

**2. MACD (å¹³æ»‘å¼‚åŒç§»åŠ¨å¹³å‡çº¿)**

**ç›‘æ§é…ç½®**:
```yaml
fast: 12
slow: 26
signal: 9
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸš€ **é‡‘å‰ + æŸ±çŠ¶å›¾è½¬æ­£**: å¼ºä¹°å…¥ä¿¡å· (+25åˆ†)
- ğŸ’¥ **æ­»å‰ + æŸ±çŠ¶å›¾è½¬è´Ÿ**: å¼ºå–å‡ºä¿¡å· (-25åˆ†)
- âš ï¸ **èƒŒç¦»ä¿¡å·**:
  - ä»·æ ¼åˆ›æ–°é«˜ï¼ŒMACDä¸åˆ›æ–°é«˜ â†’ é¡¶èƒŒç¦»ï¼Œè­¦æƒ•å›è°ƒ
  - ä»·æ ¼åˆ›æ–°ä½ï¼ŒMACDä¸åˆ›æ–°ä½ â†’ åº•èƒŒç¦»ï¼Œå¯èƒ½åå¼¹

**MACDèƒŒç¦»æ£€æµ‹**:
```python
def detect_macd_divergence(prices, macd_values, window=14):
    """
    æ£€æµ‹MACDèƒŒç¦»

    Returns:
        "bullish_divergence" - åº•èƒŒç¦»ï¼ˆçœ‹æ¶¨ï¼‰
        "bearish_divergence" - é¡¶èƒŒç¦»ï¼ˆçœ‹è·Œï¼‰
        "no_divergence" - æ— èƒŒç¦»
    """
    # æœ€è¿‘windowæ ¹Kçº¿
    recent_prices = prices[-window:]
    recent_macd = macd_values[-window:]

    # æ£€æµ‹é¡¶èƒŒç¦»
    if recent_prices[-1] > max(recent_prices[:-1]):  # ä»·æ ¼æ–°é«˜
        if recent_macd[-1] < max(recent_macd[:-1]):  # MACDæœªæ–°é«˜
            return "bearish_divergence"

    # æ£€æµ‹åº•èƒŒç¦»
    if recent_prices[-1] < min(recent_prices[:-1]):  # ä»·æ ¼æ–°ä½
        if recent_macd[-1] > min(recent_macd[:-1]):  # MACDæœªæ–°ä½
            return "bullish_divergence"

    return "no_divergence"
```

#### 2.1.2 éœ‡è¡ç±»æŒ‡æ ‡

**3. RSI (ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡)**

**ç›‘æ§é…ç½®**:
```yaml
period: 14
overbought: 70    # è¶…ä¹°çº¿
oversold: 30      # è¶…å–çº¿
extreme_high: 85  # æåº¦è¶…ä¹°
extreme_low: 15   # æåº¦è¶…å–
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸ”´ **RSI > 85**: æåº¦è¶…ä¹°ï¼Œå¼ºçƒˆå–å‡ºä¿¡å·
- ğŸŸ¢ **RSI < 15**: æåº¦è¶…å–ï¼Œå¼ºçƒˆä¹°å…¥ä¿¡å·
- âš ï¸ **RSI 50-70 æŒç»­ä¸Šæ¶¨**: å¥åº·ä¸Šæ¶¨ï¼Œå¯æŒæœ‰
- âš ï¸ **RSI 30-50 æŒç»­ä¸‹è·Œ**: å¥åº·ä¸‹è·Œï¼Œè§‚æœ›

**RSIåŠ¨æ€é˜ˆå€¼è°ƒæ•´**:
```python
def get_dynamic_rsi_threshold(market_volatility):
    """
    æ ¹æ®å¸‚åœºæ³¢åŠ¨æ€§åŠ¨æ€è°ƒæ•´RSIé˜ˆå€¼

    é«˜æ³¢åŠ¨å¸‚åœº: æ”¾å®½é˜ˆå€¼ï¼ˆé¿å…é¢‘ç¹å‡ä¿¡å·ï¼‰
    ä½æ³¢åŠ¨å¸‚åœº: æ”¶ç´§é˜ˆå€¼ï¼ˆæ•æ‰å¾®å¼±ä¿¡å·ï¼‰
    """
    if market_volatility > 0.05:  # é«˜æ³¢åŠ¨ï¼ˆæ—¥æ³¢å¹… > 5%ï¼‰
        return {
            "overbought": 80,    # æ›´é«˜æ‰ç®—è¶…ä¹°
            "oversold": 20       # æ›´ä½æ‰ç®—è¶…å–
        }
    elif market_volatility < 0.02:  # ä½æ³¢åŠ¨
        return {
            "overbought": 65,    # æ›´å®¹æ˜“è¶…ä¹°
            "oversold": 35       # æ›´å®¹æ˜“è¶…å–
        }
    else:  # æ­£å¸¸æ³¢åŠ¨
        return {
            "overbought": 70,
            "oversold": 30
        }
```

**4. å¸ƒæ—å¸¦ (Bollinger Bands)**

**ç›‘æ§é…ç½®**:
```yaml
period: 20
std: 2
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸ“‰ **ä»·æ ¼è§¦åŠä¸‹è½¨ + RSI < 30**: å¼ºä¹°å…¥ä¿¡å·
- ğŸ“ˆ **ä»·æ ¼è§¦åŠä¸Šè½¨ + RSI > 70**: å¼ºå–å‡ºä¿¡å·
- ğŸ“Š **å¸ƒæ—å¸¦æ”¶çª„ (å¸¦å®½ < å‡å€¼çš„4%)**: éœ‡è¡å¸‚ï¼Œçªç ´åœ¨å³
- ğŸ’¥ **å¸ƒæ—å¸¦æ‰©å¼  (å¸¦å®½ > å‡å€¼çš„8%)**: è¶‹åŠ¿è¡Œæƒ…ï¼Œè·Ÿéšè¶‹åŠ¿

**å¸ƒæ—å¸¦ç­–ç•¥**:
```python
def bollinger_band_strategy(price, upper, middle, lower, bandwidth):
    """
    å¸ƒæ—å¸¦äº¤æ˜“ç­–ç•¥

    Returns:
        signal, confidence, reason
    """
    # è®¡ç®—ä»·æ ¼åœ¨å¸ƒæ—å¸¦ä¸­çš„ä½ç½®
    bb_position = (price - lower) / (upper - lower)

    # å¸¦å®½ç™¾åˆ†æ¯”
    bandwidth_pct = (upper - lower) / middle

    # æƒ…å†µ1: å¸ƒæ—å¸¦æ”¶çª„ (< 4%) - éœ‡è¡å¸‚
    if bandwidth_pct < 0.04:
        return "WAIT", 0.3, "å¸ƒæ—å¸¦æ”¶çª„ï¼Œç­‰å¾…çªç ´"

    # æƒ…å†µ2: ä»·æ ¼çªç ´ä¸‹è½¨
    if bb_position < 0.05:  # ä»·æ ¼åœ¨ä¸‹è½¨é™„è¿‘
        return "BUY", 0.75, "ä»·æ ¼è§¦åŠå¸ƒæ—å¸¦ä¸‹è½¨ï¼Œè¶…å–åå¼¹"

    # æƒ…å†µ3: ä»·æ ¼çªç ´ä¸Šè½¨
    if bb_position > 0.95:  # ä»·æ ¼åœ¨ä¸Šè½¨é™„è¿‘
        return "SELL", 0.70, "ä»·æ ¼è§¦åŠå¸ƒæ—å¸¦ä¸Šè½¨ï¼Œè¶…ä¹°å›è°ƒ"

    # æƒ…å†µ4: ä»·æ ¼åœ¨ä¸­è½¨é™„è¿‘
    if 0.45 < bb_position < 0.55:
        return "NEUTRAL", 0.5, "ä»·æ ¼åœ¨å¸ƒæ—å¸¦ä¸­è½¨é™„è¿‘"

    return "HOLD", 0.5, "è§‚æœ›"
```

**5. KDJ (éšæœºæŒ‡æ ‡)**

**ç›‘æ§é…ç½®**:
```yaml
period: 9
signal_period: 3
overbought: 80
oversold: 20
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸ”¥ **KDJä¸‰çº¿ä½ä½é‡‘å‰ (Kã€Dã€J < 20)**: å¼ºä¹°å…¥
- ğŸ’§ **KDJä¸‰çº¿é«˜ä½æ­»å‰ (Kã€Dã€J > 80)**: å¼ºå–å‡º
- âš ï¸ **Jå€¼ > 100 æˆ– < 0**: æç«¯è¶…ä¹°/è¶…å–ï¼Œå¯èƒ½åè½¬

#### 2.1.3 æˆäº¤é‡æŒ‡æ ‡

**6. æˆäº¤é‡åˆ†æ**

**ç›‘æ§é…ç½®**:
```yaml
vol_ma_5: 5æ—¥å‡é‡
vol_ma_20: 20æ—¥å‡é‡
vol_ma_60: 60æ—¥å‡é‡
```

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **æ”¾é‡çªç ´** (æˆäº¤é‡ > 20æ—¥å‡é‡ Ã— 1.5): ç¡®è®¤çªç ´æœ‰æ•ˆ
- âŒ **ç¼©é‡ä¸Šæ¶¨**: ä¸Šæ¶¨æ— åŠ›ï¼Œè­¦æƒ•å›è°ƒ
- âš ï¸ **å¤©é‡ä¿¡å·** (æˆäº¤é‡ > 20æ—¥å‡é‡ Ã— 3): å¯èƒ½é¡¶éƒ¨æˆ–åº•éƒ¨

**æˆäº¤é‡ç¡®è®¤è§„åˆ™**:
```python
def confirm_breakout_with_volume(price_change, volume, vol_ma20):
    """
    ç”¨æˆäº¤é‡ç¡®è®¤ä»·æ ¼çªç ´çš„æœ‰æ•ˆæ€§

    Returns:
        is_valid, confidence
    """
    volume_ratio = volume / vol_ma20

    # ä¸Šæ¶¨çªç ´
    if price_change > 0.03:  # æ¶¨å¹… > 3%
        if volume_ratio > 2.0:
            return True, 0.9, "æ”¾é‡çªç ´ï¼Œä¿¡å·å¼ºçƒˆ"
        elif volume_ratio > 1.5:
            return True, 0.7, "é€‚åº¦æ”¾é‡ï¼Œä¿¡å·æœ‰æ•ˆ"
        else:
            return False, 0.3, "ç¼©é‡ä¸Šæ¶¨ï¼Œçªç ´æ— æ•ˆ"

    # ä¸‹è·Œçªç ´
    if price_change < -0.03:  # è·Œå¹… > 3%
        if volume_ratio > 2.0:
            return True, 0.9, "æ”¾é‡ä¸‹è·Œï¼Œè·ŒåŠ¿ç¡®è®¤"
        elif volume_ratio > 1.5:
            return True, 0.7, "é€‚åº¦æ”¾é‡ï¼Œä¸‹è·Œæœ‰æ•ˆ"
        else:
            return False, 0.4, "ç¼©é‡ä¸‹è·Œï¼Œå¯èƒ½åå¼¹"

    return False, 0.5, "ä»·æ ¼å˜åŒ–ä¸æ˜¾è‘—"
```

**7. OBV (èƒ½é‡æ½®æŒ‡æ ‡)**

**ç”¨é€”**: ç¡®è®¤ä»·æ ¼è¶‹åŠ¿çš„å¯æŒç»­æ€§

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **OBV + ä»·æ ¼åŒæ­¥ä¸Šæ¶¨**: ä¸Šæ¶¨è¶‹åŠ¿å¥åº·
- âŒ **OBVä¸æ¶¨ï¼Œä»·æ ¼ä¸Šæ¶¨**: é‡ä»·èƒŒç¦»ï¼Œä¸Šæ¶¨ä¹åŠ›
- âš ï¸ **OBVçªç ´ + ä»·æ ¼æœªçªç ´**: ä»·æ ¼å¯èƒ½è·Ÿéšçªç ´

### 2.2 å¿…é¡»ç›‘æ§çš„èµ„é‡‘é¢æŒ‡æ ‡

#### 2.2.1 æœŸè´§èµ„é‡‘è´¹ç‡

**æŒ‡æ ‡è¯´æ˜**: åæ˜ æœŸè´§å¸‚åœºå¤šç©ºæƒ…ç»ª

**ç›‘æ§é…ç½®**:
```yaml
æåº¦å¤šå¤´è¿‡çƒ­: > 0.001 (0.1%)
å¤šå¤´è¿‡çƒ­: > 0.0005 (0.05%)
ä¸­æ€§: -0.0001 ~ 0.0001
ç©ºå¤´è¿‡åº¦: < -0.0005 (-0.05%)
æåº¦ç©ºå¤´è¿‡åº¦: < -0.001 (-0.1%)
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸ”´ **èµ„é‡‘è´¹ç‡ > 0.1%**: å¤šå¤´ç–¯ç‹‚ï¼Œåšç©ºå¥—åˆ©æœºä¼š
- ğŸŸ¢ **èµ„é‡‘è´¹ç‡ < -0.1%**: ç©ºå¤´ç–¯ç‹‚ï¼Œåšå¤šåå¼¹æœºä¼š
- âš ï¸ **èµ„é‡‘è´¹ç‡æŒç»­ä¸ºæ­£**: å¤šå¤´å ä¼˜ï¼Œä½†æ³¨æ„è¿‡çƒ­
- âš ï¸ **èµ„é‡‘è´¹ç‡æŒç»­ä¸ºè´Ÿ**: ç©ºå¤´å ä¼˜ï¼Œä½†æ³¨æ„è¶…è·Œ

**èµ„é‡‘è´¹ç‡äº¤æ˜“ç­–ç•¥**:
```python
def funding_rate_strategy(funding_rate, funding_history):
    """
    åŸºäºèµ„é‡‘è´¹ç‡çš„äº¤æ˜“ç­–ç•¥

    Args:
        funding_rate: å½“å‰èµ„é‡‘è´¹ç‡
        funding_history: æœ€è¿‘NæœŸèµ„é‡‘è´¹ç‡å†å²

    Returns:
        signal, reason
    """
    # è®¡ç®—èµ„é‡‘è´¹ç‡è¶‹åŠ¿
    avg_funding = sum(funding_history) / len(funding_history)

    # æåº¦å¤šå¤´è¿‡çƒ­ï¼ˆèµ„é‡‘è´¹ç‡ > 0.1%ï¼‰
    if funding_rate > 0.001:
        return "SHORT", f"èµ„é‡‘è´¹ç‡æé«˜({funding_rate*100:.3f}%)ï¼Œå¤šå¤´è¿‡åº¦æ‹¥æŒ¤ï¼Œåšç©ºæœºä¼š"

    # æåº¦ç©ºå¤´è¿‡åº¦ï¼ˆèµ„é‡‘è´¹ç‡ < -0.1%ï¼‰
    elif funding_rate < -0.001:
        return "LONG", f"èµ„é‡‘è´¹ç‡æä½({funding_rate*100:.3f}%)ï¼Œç©ºå¤´è¿‡åº¦æ‹¥æŒ¤ï¼Œåšå¤šæœºä¼š"

    # èµ„é‡‘è´¹ç‡ä»è´Ÿè½¬æ­£ï¼ˆç©ºå¤´å¹³ä»“ï¼Œå¤šå¤´å»ºä»“ï¼‰
    elif funding_rate > 0 and avg_funding < 0:
        return "LONG", "èµ„é‡‘è´¹ç‡ç”±è´Ÿè½¬æ­£ï¼Œå¸‚åœºæƒ…ç»ªè½¬å¤š"

    # èµ„é‡‘è´¹ç‡ä»æ­£è½¬è´Ÿï¼ˆå¤šå¤´å¹³ä»“ï¼Œç©ºå¤´å»ºä»“ï¼‰
    elif funding_rate < 0 and avg_funding > 0:
        return "SHORT", "èµ„é‡‘è´¹ç‡ç”±æ­£è½¬è´Ÿï¼Œå¸‚åœºæƒ…ç»ªè½¬ç©º"

    return "NEUTRAL", "èµ„é‡‘è´¹ç‡ä¸­æ€§"
```

#### 2.2.2 Hyperliquid èªæ˜é’±ç›‘æ§

**æŒ‡æ ‡è¯´æ˜**: è¿½è¸ªDEXå¤§æˆ·äº¤æ˜“è¡Œä¸º

**ç›‘æ§é…ç½®**:
```yaml
å¤§é¢æµå…¥é˜ˆå€¼: > $1,000,000
ä¸­é¢æµå…¥é˜ˆå€¼: > $500,000
å°é¢æµå…¥é˜ˆå€¼: > $100,000
æ´»è·ƒé’±åŒ…é˜ˆå€¼: > 5ä¸ª
```

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **å‡€æµå…¥ > $1M + æ´»è·ƒé’±åŒ… > 5**: å¼ºçƒˆçœ‹æ¶¨
- âŒ **å‡€æµå‡º > $1M + æ´»è·ƒé’±åŒ… > 5**: å¼ºçƒˆçœ‹è·Œ
- âš ï¸ **èªæ˜é’±åšå¤šæ¯”ä¾‹ > 70%**: å¤šå¤´ä¿¡å·
- âš ï¸ **èªæ˜é’±åšç©ºæ¯”ä¾‹ > 70%**: ç©ºå¤´ä¿¡å·
- ğŸ”¥ **èªæ˜é’±å¹³å‡ç›ˆåˆ© > $10K**: äº¤æ˜“æˆåŠŸç‡é«˜

**èªæ˜é’±è¿½è¸ªç­–ç•¥**:
```python
def smart_money_signal(net_flow, active_wallets, long_ratio, avg_pnl):
    """
    èªæ˜é’±ä¿¡å·åˆ†æ

    Returns:
        score (0-100), signal, confidence
    """
    score = 50  # ä¸­æ€§èµ·ç‚¹
    reasons = []

    # å‡€æµå…¥åˆ†æ
    if abs(net_flow) > 1000000:
        if net_flow > 0:
            score += 25
            reasons.append(f"å¤§é¢å‡€æµå…¥ ${net_flow/1e6:.2f}M")
        else:
            score -= 25
            reasons.append(f"å¤§é¢å‡€æµå‡º ${abs(net_flow)/1e6:.2f}M")

    # æ´»è·ƒé’±åŒ…æ•°
    if active_wallets > 5:
        reasons.append(f"{active_wallets}ä¸ªèªæ˜é’±åŒ…åŒæ—¶æ´»è·ƒ")
        if score > 50:
            score += 10
        else:
            score -= 10

    # åšå¤š/åšç©ºæ¯”ä¾‹
    if long_ratio > 0.7:
        score += 15
        reasons.append(f"{long_ratio*100:.0f}%èªæ˜é’±åšå¤š")
    elif long_ratio < 0.3:
        score -= 15
        reasons.append(f"{(1-long_ratio)*100:.0f}%èªæ˜é’±åšç©º")

    # å¹³å‡ç›ˆäº
    if avg_pnl > 10000:
        score += 10
        reasons.append(f"èªæ˜é’±å¹³å‡ç›ˆåˆ© ${avg_pnl/1000:.1f}K")

    # ç¡®å®šä¿¡å·
    if score >= 75:
        signal = "STRONG_LONG"
        confidence = min(score / 100, 0.95)
    elif score >= 60:
        signal = "LONG"
        confidence = score / 100
    elif score <= 25:
        signal = "STRONG_SHORT"
        confidence = min((100 - score) / 100, 0.95)
    elif score <= 40:
        signal = "SHORT"
        confidence = (100 - score) / 100
    else:
        signal = "NEUTRAL"
        confidence = 0.5

    return score, signal, confidence, reasons
```

#### 2.2.3 ä»¥å¤ªåŠé“¾ä¸Šæ•°æ®

**æŒ‡æ ‡è¯´æ˜**: ç›‘æ§é“¾ä¸Šå¤§æˆ·é’±åŒ…æ´»åŠ¨

**ç›‘æ§é…ç½®**:
```yaml
å¤§é¢è½¬è´¦é˜ˆå€¼: > $100,000
æ´»è·ƒé’±åŒ…é˜ˆå€¼: > 10ä¸ª
ä¹°å–æ¯”ä¾‹æç«¯å€¼: > 0.7 æˆ– < 0.3
```

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **å¤§é¢ä¹°å…¥ > $500K**: æœºæ„å»ºä»“
- âŒ **å¤§é¢å–å‡º > $500K**: æœºæ„å‡ºè´§
- âš ï¸ **äº¤æ˜“æ‰€å¤§é¢è½¬å…¥**: å¯èƒ½ç ¸ç›˜
- âš ï¸ **äº¤æ˜“æ‰€å¤§é¢è½¬å‡º**: å¯èƒ½æ‹‰ç›˜

#### 2.2.4 ETF èµ„é‡‘æµå‘

**æŒ‡æ ‡è¯´æ˜**: æœºæ„èµ„é‡‘æƒ…ç»ª

**ç›‘æ§é…ç½®**:
```yaml
å¤§é¢æµå…¥: > $100M
ä¸­é¢æµå…¥: > $50M
å°é¢æµå…¥: > $10M
```

**å…³é”®ç›‘æ§ç‚¹**:
- âœ… **è¿ç»­3æ—¥å‡€æµå…¥ > $50M**: æœºæ„çœ‹å¤š
- âŒ **è¿ç»­3æ—¥å‡€æµå‡º > $50M**: æœºæ„çœ‹ç©º
- ğŸ”¥ **å•æ—¥æµå…¥ > $200M**: é‡å¤§åˆ©å¥½

### 2.3 å¿…é¡»ç›‘æ§çš„å¸‚åœºæƒ…ç»ªæŒ‡æ ‡

#### 2.3.1 æ–°é—»æƒ…ç»ªæŒ‡æ•°

**ç›‘æ§é…ç½®**:
```yaml
æåº¦åˆ©å¥½: > 80
åˆ©å¥½: 60-80
ä¸­æ€§: 40-60
åˆ©ç©º: 20-40
æåº¦åˆ©ç©º: < 20
```

**å…³é”®ç›‘æ§ç‚¹**:
- ğŸ“° **é‡å¤§åˆ©å¥½æ¶ˆæ¯**: æé«˜ä¹°å…¥æƒé‡
- ğŸ“° **é‡å¤§åˆ©ç©ºæ¶ˆæ¯**: ç«‹å³æ­¢æŸ
- âš ï¸ **æ¶ˆæ¯è¿‡äºä¸€è‡´**: å¯èƒ½åè½¬ä¿¡å·

#### 2.3.2 ææƒ§è´ªå©ªæŒ‡æ•° (å¯é€‰)

**ç›‘æ§é…ç½®**:
```yaml
æåº¦è´ªå©ª: > 75 (è­¦æƒ•é¡¶éƒ¨)
è´ªå©ª: 55-75 (è°¨æ…åšå¤š)
ä¸­æ€§: 45-55
ææƒ§: 25-45 (é€¢ä½ä¹°å…¥)
æåº¦ææƒ§: < 25 (æŠ„åº•æœºä¼š)
```

---

## 3. å¤šç»´åº¦ä¿¡å·ç¡®è®¤æœºåˆ¶

### 3.1 äº”ç»´åº¦è¯„åˆ†ç³»ç»Ÿ

**è¯„åˆ†æƒé‡é…ç½®**:

| ç»´åº¦ | é»˜è®¤æƒé‡ | ä¿å®ˆç­–ç•¥ | å¹³è¡¡ç­–ç•¥ | æ¿€è¿›ç­–ç•¥ |
|-----|---------|---------|---------|---------|
| æŠ€æœ¯æŒ‡æ ‡ | 40% | 45% | 40% | 30% |
| Hyperliquidèªæ˜é’± | 20% | 15% | 20% | 35% |
| æ–°é—»æƒ…ç»ª | 15% | 20% | 15% | 10% |
| èµ„é‡‘è´¹ç‡ | 15% | 15% | 15% | 15% |
| é“¾ä¸Šæ•°æ® | 10% | 5% | 10% | 10% |

**ç»¼åˆè¯„åˆ†è®¡ç®—**:
```python
def calculate_comprehensive_score(
    technical_score,    # æŠ€æœ¯æŒ‡æ ‡å¾—åˆ† (0-100)
    smart_money_score,  # èªæ˜é’±å¾—åˆ† (0-100)
    news_score,         # æ–°é—»æƒ…ç»ªå¾—åˆ† (0-100)
    funding_score,      # èµ„é‡‘è´¹ç‡å¾—åˆ† (0-100)
    onchain_score,      # é“¾ä¸Šæ•°æ®å¾—åˆ† (0-100)
    strategy="balanced" # ç­–ç•¥ç±»å‹
):
    """
    è®¡ç®—ç»¼åˆè¯„åˆ†

    Returns:
        total_score (0-100)
    """
    # æ ¹æ®ç­–ç•¥é€‰æ‹©æƒé‡
    weights = {
        "conservative": [0.45, 0.15, 0.20, 0.15, 0.05],
        "balanced": [0.40, 0.20, 0.15, 0.15, 0.10],
        "aggressive": [0.30, 0.35, 0.10, 0.15, 0.10]
    }

    w = weights.get(strategy, weights["balanced"])

    total_score = (
        technical_score * w[0] +
        smart_money_score * w[1] +
        news_score * w[2] +
        funding_score * w[3] +
        onchain_score * w[4]
    )

    return round(total_score, 2)
```

### 3.2 ä¿¡å·ä¸€è‡´æ€§æ£€æŸ¥

**è§„åˆ™**: è‡³å°‘3ä¸ªç»´åº¦å¾—åˆ† > 60 æ‰èƒ½ç¡®è®¤å¼ºä¿¡å·

```python
def check_signal_consensus(dimension_scores):
    """
    æ£€æŸ¥å„ç»´åº¦ä¿¡å·ä¸€è‡´æ€§

    Args:
        dimension_scores: {
            'technical': 75,
            'smart_money': 80,
            'news': 55,
            'funding': 70,
            'onchain': 65
        }

    Returns:
        consensus_level, bullish_count, bearish_count, neutral_count
    """
    bullish_count = 0   # çœ‹æ¶¨ç»´åº¦æ•°é‡ (å¾—åˆ† > 60)
    bearish_count = 0   # çœ‹è·Œç»´åº¦æ•°é‡ (å¾—åˆ† < 40)
    neutral_count = 0   # ä¸­æ€§ç»´åº¦æ•°é‡ (40-60)

    for dimension, score in dimension_scores.items():
        if score > 60:
            bullish_count += 1
        elif score < 40:
            bearish_count += 1
        else:
            neutral_count += 1

    # åˆ¤æ–­ä¸€è‡´æ€§ç­‰çº§
    if bullish_count >= 4:
        consensus_level = "STRONG_CONSENSUS_BULLISH"  # å¼ºçƒˆä¸€è‡´çœ‹æ¶¨
    elif bullish_count >= 3:
        consensus_level = "CONSENSUS_BULLISH"         # ä¸€è‡´çœ‹æ¶¨
    elif bearish_count >= 4:
        consensus_level = "STRONG_CONSENSUS_BEARISH"  # å¼ºçƒˆä¸€è‡´çœ‹è·Œ
    elif bearish_count >= 3:
        consensus_level = "CONSENSUS_BEARISH"         # ä¸€è‡´çœ‹è·Œ
    elif neutral_count >= 3:
        consensus_level = "NO_CONSENSUS"              # æ— æ˜ç¡®æ–¹å‘
    else:
        consensus_level = "DIVERGENCE"                # ä¿¡å·åˆ†æ­§

    return consensus_level, bullish_count, bearish_count, neutral_count
```

**æ‰§è¡Œè§„åˆ™**:
```python
def can_execute_trade(consensus_level, total_score):
    """
    åˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰§è¡Œäº¤æ˜“

    Returns:
        can_trade, reason
    """
    # å¼ºçƒˆä¸€è‡´çœ‹æ¶¨ + ç»¼åˆå¾—åˆ† > 75
    if consensus_level == "STRONG_CONSENSUS_BULLISH" and total_score > 75:
        return True, "å¼ºçƒˆä¹°å…¥ä¿¡å·ï¼Œå¯æ‰§è¡Œ"

    # ä¸€è‡´çœ‹æ¶¨ + ç»¼åˆå¾—åˆ† > 65
    if consensus_level == "CONSENSUS_BULLISH" and total_score > 65:
        return True, "ä¹°å…¥ä¿¡å·ç¡®è®¤ï¼Œå¯æ‰§è¡Œ"

    # å¼ºçƒˆä¸€è‡´çœ‹è·Œ + ç»¼åˆå¾—åˆ† < 25
    if consensus_level == "STRONG_CONSENSUS_BEARISH" and total_score < 25:
        return True, "å¼ºçƒˆå–å‡ºä¿¡å·ï¼Œå¯æ‰§è¡Œ"

    # ä¸€è‡´çœ‹è·Œ + ç»¼åˆå¾—åˆ† < 35
    if consensus_level == "CONSENSUS_BEARISH" and total_score < 35:
        return True, "å–å‡ºä¿¡å·ç¡®è®¤ï¼Œå¯æ‰§è¡Œ"

    # ä¿¡å·åˆ†æ­§æˆ–æ— æ˜ç¡®æ–¹å‘
    if consensus_level in ["DIVERGENCE", "NO_CONSENSUS"]:
        return False, "ä¿¡å·åˆ†æ­§ï¼Œä¸æ‰§è¡Œäº¤æ˜“"

    return False, "ä¿¡å·å¼ºåº¦ä¸è¶³ï¼Œä¸æ‰§è¡Œäº¤æ˜“"
```

### 3.3 å‡ä¿¡å·è¿‡æ»¤

**å¸¸è§å‡ä¿¡å·**:

**1. éœ‡è¡å¸‚ä¸­çš„å‡çªç ´**

```python
def detect_false_breakout(price, ema_20, ema_50, bollinger_width):
    """
    æ£€æµ‹å‡çªç ´

    Returns:
        is_false_breakout, reason
    """
    # å‡çº¿é—´è·å¤ªå° = éœ‡è¡å¸‚
    ema_spread = abs(ema_20 - ema_50) / ema_50

    if ema_spread < 0.02:  # é—´è· < 2%
        return True, "éœ‡è¡å¸‚ä¸­ï¼Œçªç ´å¯èƒ½æ˜¯å‡ä¿¡å·"

    # å¸ƒæ—å¸¦è¿‡çª„ = æ³¢åŠ¨ç‡ä½
    if bollinger_width < 0.04:  # å¸¦å®½ < 4%
        return True, "å¸ƒæ—å¸¦è¿‡çª„ï¼Œçªç ´å¯èƒ½æ— åŠ›"

    return False, "çªç ´æœ‰æ•ˆ"
```

**2. æˆäº¤é‡ä¸é…åˆçš„çªç ´**

```python
def validate_breakout_volume(volume, vol_ma20, price_change):
    """
    éªŒè¯çªç ´æ—¶çš„æˆäº¤é‡

    Returns:
        is_valid, confidence
    """
    volume_ratio = volume / vol_ma20

    # çªç ´å¹…åº¦ > 3% ä½†æˆäº¤é‡ä¸è¶³
    if abs(price_change) > 0.03:
        if volume_ratio < 1.2:
            return False, 0.3, "ç¼©é‡çªç ´ï¼Œä¿¡å·æ— æ•ˆ"
        elif volume_ratio < 1.5:
            return True, 0.6, "æˆäº¤é‡ä¸€èˆ¬ï¼Œä¿¡å·åå¼±"
        else:
            return True, 0.9, "æ”¾é‡çªç ´ï¼Œä¿¡å·æœ‰æ•ˆ"

    return True, 0.5, "ä»·æ ¼å˜åŒ–ä¸æ˜¾è‘—"
```

**3. æç«¯è¡Œæƒ…ä¸­çš„æ»åä¿¡å·**

```python
def is_lagging_signal(current_price, entry_price_suggestion, price_change_since_signal):
    """
    æ£€æµ‹ä¿¡å·æ˜¯å¦å·²ç»æ»å

    Returns:
        is_lagging, reason
    """
    # ä»ä¿¡å·ç”Ÿæˆåˆ°æ‰§è¡Œï¼Œä»·æ ¼å·²ç»æ¶¨äº†å¾ˆå¤š
    if price_change_since_signal > 0.05:  # å·²æ¶¨ > 5%
        return True, "è¿½é«˜é£é™©ï¼Œä¿¡å·å·²æ»å"

    # ä»ä¿¡å·ç”Ÿæˆåˆ°æ‰§è¡Œï¼Œä»·æ ¼å·²ç»è·Œäº†å¾ˆå¤š
    if price_change_since_signal < -0.05:  # å·²è·Œ > 5%
        return True, "æ€è·Œé£é™©ï¼Œä¿¡å·å·²æ»å"

    return False, "ä¿¡å·åŠæ—¶"
```

---

## 4. åŠ¨æ€ä»“ä½ç®¡ç†ç³»ç»Ÿ

### 4.1 å‡¯åˆ©å…¬å¼ä¼˜åŒ–ä»“ä½

**å‡¯åˆ©å…¬å¼**:
```
f* = (bp - q) / b

å…¶ä¸­:
f* = æœ€ä¼˜ä»“ä½æ¯”ä¾‹
b = ç›ˆäºæ¯” (å¹³å‡ç›ˆåˆ© / å¹³å‡äºæŸ)
p = èƒœç‡
q = è´¥ç‡ (1 - p)
```

**å®é™…åº”ç”¨** (ä¿å®ˆèµ·è§ï¼Œä½¿ç”¨åŠå‡¯åˆ©):
```python
def calculate_kelly_position(win_rate, profit_loss_ratio, max_position=0.30):
    """
    ä½¿ç”¨å‡¯åˆ©å…¬å¼è®¡ç®—æœ€ä¼˜ä»“ä½

    Args:
        win_rate: èƒœç‡ (0-1)
        profit_loss_ratio: ç›ˆäºæ¯”
        max_position: æœ€å¤§ä»“ä½é™åˆ¶

    Returns:
        recommended_position
    """
    # å‡¯åˆ©å…¬å¼
    kelly = (profit_loss_ratio * win_rate - (1 - win_rate)) / profit_loss_ratio

    # åŠå‡¯åˆ© (é™ä½é£é™©)
    half_kelly = kelly * 0.5

    # é™åˆ¶æœ€å¤§ä»“ä½
    position = max(0, min(half_kelly, max_position))

    return round(position, 3)

# ç¤ºä¾‹
# èƒœç‡ 60%ï¼Œç›ˆäºæ¯” 2:1
position = calculate_kelly_position(0.60, 2.0, 0.30)
# ç»“æœ: 0.15 (å»ºè®®ä»“ä½ 15%)
```

### 4.2 ä¿¡å·å¼ºåº¦è°ƒæ•´ä»“ä½

```python
def adjust_position_by_signal(base_position, signal_confidence, consensus_level):
    """
    æ ¹æ®ä¿¡å·å¼ºåº¦è°ƒæ•´ä»“ä½

    Args:
        base_position: åŸºç¡€ä»“ä½
        signal_confidence: ä¿¡å·ç½®ä¿¡åº¦ (0-1)
        consensus_level: ä¿¡å·ä¸€è‡´æ€§ç­‰çº§

    Returns:
        adjusted_position
    """
    # åŸºç¡€ä»“ä½ä¹˜ä»¥ç½®ä¿¡åº¦
    position = base_position * signal_confidence

    # æ ¹æ®ä¸€è‡´æ€§ç­‰çº§è¿›ä¸€æ­¥è°ƒæ•´
    if consensus_level == "STRONG_CONSENSUS_BULLISH":
        position *= 1.3  # å¢åŠ 30%
    elif consensus_level == "CONSENSUS_BULLISH":
        position *= 1.1  # å¢åŠ 10%
    elif consensus_level == "DIVERGENCE":
        position *= 0.5  # å‡å°‘50%
    elif consensus_level == "NO_CONSENSUS":
        position = 0  # ä¸äº¤æ˜“

    # ç¡®ä¿ä¸è¶…è¿‡è´¦æˆ·é£é™©é™åˆ¶
    max_single_position = 0.30  # å•ç¬”æœ€å¤§30%
    position = min(position, max_single_position)

    return round(position, 3)
```

### 4.3 è¿ç»­ç›ˆäºè°ƒæ•´ä»“ä½

```python
def adjust_position_by_performance(base_position, consecutive_wins, consecutive_losses):
    """
    æ ¹æ®è¿ç»­ç›ˆäºè°ƒæ•´ä»“ä½

    Args:
        base_position: åŸºç¡€ä»“ä½
        consecutive_wins: è¿ç»­ç›ˆåˆ©æ¬¡æ•°
        consecutive_losses: è¿ç»­äºæŸæ¬¡æ•°

    Returns:
        adjusted_position, reason
    """
    position = base_position
    reason = "æ­£å¸¸ä»“ä½"

    # è¿ç»­ç›ˆåˆ© -> é€‚åº¦å¢åŠ ä»“ä½ï¼ˆæœ€å¤š+50%ï¼‰
    if consecutive_wins >= 3:
        multiplier = min(1.0 + (consecutive_wins - 2) * 0.1, 1.5)
        position = base_position * multiplier
        reason = f"è¿ç»­{consecutive_wins}æ¬¡ç›ˆåˆ©ï¼Œå¢åŠ ä»“ä½{(multiplier-1)*100:.0f}%"

    # è¿ç»­äºæŸ -> å¤§å¹…å‡å°‘ä»“ä½
    elif consecutive_losses >= 2:
        multiplier = max(1.0 - consecutive_losses * 0.2, 0.2)
        position = base_position * multiplier
        reason = f"è¿ç»­{consecutive_losses}æ¬¡äºæŸï¼Œå‡å°‘ä»“ä½{(1-multiplier)*100:.0f}%"

    # è¿ç»­äºæŸ >= 3æ¬¡ -> æš‚åœäº¤æ˜“
    if consecutive_losses >= 3:
        position = 0
        reason = f"è¿ç»­{consecutive_losses}æ¬¡äºæŸï¼Œæš‚åœäº¤æ˜“"

    return round(position, 3), reason
```

### 4.4 è´¦æˆ·å›æ’¤æ§åˆ¶

```python
def check_drawdown_limit(current_equity, peak_equity, max_drawdown=0.15):
    """
    æ£€æŸ¥è´¦æˆ·å›æ’¤æ˜¯å¦è¶…é™

    Args:
        current_equity: å½“å‰å‡€å€¼
        peak_equity: å†å²æœ€é«˜å‡€å€¼
        max_drawdown: æœ€å¤§å›æ’¤é™åˆ¶ (é»˜è®¤15%)

    Returns:
        is_within_limit, current_drawdown, action
    """
    # è®¡ç®—å½“å‰å›æ’¤
    current_drawdown = (peak_equity - current_equity) / peak_equity

    # è¶…è¿‡æœ€å¤§å›æ’¤ -> åœæ­¢äº¤æ˜“
    if current_drawdown >= max_drawdown:
        return False, current_drawdown, "STOP_TRADING"

    # å›æ’¤ > 10% -> å‡å°‘ä»“ä½50%
    elif current_drawdown >= 0.10:
        return True, current_drawdown, "REDUCE_POSITION_50%"

    # å›æ’¤ > 5% -> å‡å°‘ä»“ä½25%
    elif current_drawdown >= 0.05:
        return True, current_drawdown, "REDUCE_POSITION_25%"

    # å›æ’¤ < 5% -> æ­£å¸¸äº¤æ˜“
    else:
        return True, current_drawdown, "NORMAL"
```

---

## 5. æ™ºèƒ½æ­¢æŸæ­¢ç›ˆç­–ç•¥

### 5.1 å¤šå±‚æ¬¡æ­¢æŸç³»ç»Ÿ

**æ­¢æŸå±‚çº§**:
```
ç¬¬ä¸€å±‚: ç¡¬æ­¢æŸï¼ˆå›ºå®šç™¾åˆ†æ¯”ï¼‰- æœ€åé˜²çº¿
ç¬¬äºŒå±‚: æŠ€æœ¯æ­¢æŸï¼ˆæ”¯æ’‘ä½ç ´ä½ï¼‰- ä¸»è¦é˜²çº¿
ç¬¬ä¸‰å±‚: æ—¶é—´æ­¢æŸï¼ˆæŒä»“æ—¶é—´è¿‡é•¿ï¼‰- è¾…åŠ©é˜²çº¿
ç¬¬å››å±‚: ä¿¡å·åè½¬æ­¢æŸï¼ˆç»¼åˆå¾—åˆ†è½¬å‘ï¼‰- çµæ´»é˜²çº¿
```

#### 5.1.1 å›ºå®šç™¾åˆ†æ¯”æ­¢æŸ

```python
def calculate_hard_stop_loss(entry_price, side, risk_profile="balanced"):
    """
    è®¡ç®—ç¡¬æ­¢æŸä»·æ ¼

    Args:
        entry_price: å…¥åœºä»·
        side: "BUY" æˆ– "SELL"
        risk_profile: é£é™©çº§åˆ«

    Returns:
        stop_loss_price, stop_loss_pct
    """
    stop_loss_pct = {
        "conservative": 0.03,  # 3%
        "balanced": 0.05,      # 5%
        "aggressive": 0.08     # 8%
    }.get(risk_profile, 0.05)

    if side == "BUY":
        stop_loss = entry_price * (1 - stop_loss_pct)
    else:  # SELL
        stop_loss = entry_price * (1 + stop_loss_pct)

    return stop_loss, stop_loss_pct
```

#### 5.1.2 ATRåŠ¨æ€æ­¢æŸ

```python
def calculate_atr_stop_loss(entry_price, atr, side, multiplier=2.0):
    """
    åŸºäºATRè®¡ç®—åŠ¨æ€æ­¢æŸ

    Args:
        entry_price: å…¥åœºä»·
        atr: å¹³å‡çœŸå®æ³¢å¹…
        side: "BUY" æˆ– "SELL"
        multiplier: ATRå€æ•°

    Returns:
        stop_loss_price
    """
    stop_distance = atr * multiplier

    if side == "BUY":
        stop_loss = entry_price - stop_distance
    else:  # SELL
        stop_loss = entry_price + stop_distance

    return stop_loss
```

#### 5.1.3 æŠ€æœ¯ä½æ­¢æŸ

```python
def calculate_support_resistance_stop_loss(entry_price, side, support_level, resistance_level):
    """
    åŸºäºæ”¯æ’‘/å‹åŠ›ä½è®¡ç®—æ­¢æŸ

    Args:
        entry_price: å…¥åœºä»·
        side: "BUY" æˆ– "SELL"
        support_level: æ”¯æ’‘ä½
        resistance_level: å‹åŠ›ä½

    Returns:
        stop_loss_price, reason
    """
    if side == "BUY":
        # åšå¤š: æ­¢æŸè®¾åœ¨æ”¯æ’‘ä½ä¸‹æ–¹1%
        stop_loss = support_level * 0.99
        reason = f"æ”¯æ’‘ä½æ­¢æŸ (æ”¯æ’‘: ${support_level:.2f})"
    else:  # SELL
        # åšç©º: æ­¢æŸè®¾åœ¨å‹åŠ›ä½ä¸Šæ–¹1%
        stop_loss = resistance_level * 1.01
        reason = f"å‹åŠ›ä½æ­¢æŸ (å‹åŠ›: ${resistance_level:.2f})"

    return stop_loss, reason
```

#### 5.1.4 ç§»åŠ¨æ­¢æŸ

```python
def calculate_trailing_stop_loss(entry_price, current_price, highest_price, side, trail_pct=0.05):
    """
    è®¡ç®—ç§»åŠ¨æ­¢æŸ

    Args:
        entry_price: å…¥åœºä»·
        current_price: å½“å‰ä»·
        highest_price: æœ€é«˜ä»· (åšå¤š) / æœ€ä½ä»· (åšç©º)
        side: "BUY" æˆ– "SELL"
        trail_pct: å›æ’¤ç™¾åˆ†æ¯”

    Returns:
        trailing_stop_loss
    """
    if side == "BUY":
        # åšå¤š: ä»æœ€é«˜ä»·å›æ’¤N%
        profit_pct = (highest_price - entry_price) / entry_price

        # åªæœ‰ç›ˆåˆ© > åˆå§‹æ­¢æŸå¹…åº¦æ‰å¯ç”¨ç§»åŠ¨æ­¢æŸ
        if profit_pct > 0.05:
            trailing_stop = highest_price * (1 - trail_pct)
            # ç§»åŠ¨æ­¢æŸä¸èƒ½ä½äºå…¥åœºä»·
            trailing_stop = max(trailing_stop, entry_price)
            return trailing_stop

        # æœªç›ˆåˆ©ï¼Œä¸å¯ç”¨ç§»åŠ¨æ­¢æŸ
        return None

    else:  # SELL
        # åšç©º: ä»æœ€ä½ä»·å›æ’¤N%
        profit_pct = (entry_price - highest_price) / entry_price

        if profit_pct > 0.05:
            trailing_stop = highest_price * (1 + trail_pct)
            trailing_stop = min(trailing_stop, entry_price)
            return trailing_stop

        return None
```

#### 5.1.5 ä¿¡å·åè½¬æ­¢æŸ

```python
def check_signal_reversal_stop(entry_signal, current_score, dimension_scores):
    """
    æ£€æŸ¥ä¿¡å·æ˜¯å¦åè½¬ï¼Œéœ€è¦æ­¢æŸ

    Args:
        entry_signal: å…¥åœºæ—¶çš„ä¿¡å· ("BUY" / "SELL")
        current_score: å½“å‰ç»¼åˆå¾—åˆ†
        dimension_scores: å½“å‰å„ç»´åº¦å¾—åˆ†

    Returns:
        should_stop, reason
    """
    # ç»Ÿè®¡åå‘ç»´åº¦æ•°é‡
    if entry_signal == "BUY":
        # åšå¤šä»“ä½ï¼Œæ£€æŸ¥æ˜¯å¦è½¬ä¸ºçœ‹è·Œ
        bearish_count = sum(1 for score in dimension_scores.values() if score < 40)

        if current_score < 40:
            return True, f"ç»¼åˆå¾—åˆ†è·Œè‡³{current_score:.0f}ï¼Œä¿¡å·åè½¬"

        if bearish_count >= 3:
            return True, f"{bearish_count}ä¸ªç»´åº¦è½¬ä¸ºçœ‹è·Œï¼Œä¿¡å·åè½¬"

    else:  # SELL
        # åšç©ºä»“ä½ï¼Œæ£€æŸ¥æ˜¯å¦è½¬ä¸ºçœ‹æ¶¨
        bullish_count = sum(1 for score in dimension_scores.values() if score > 60)

        if current_score > 60:
            return True, f"ç»¼åˆå¾—åˆ†å‡è‡³{current_score:.0f}ï¼Œä¿¡å·åè½¬"

        if bullish_count >= 3:
            return True, f"{bullish_count}ä¸ªç»´åº¦è½¬ä¸ºçœ‹æ¶¨ï¼Œä¿¡å·åè½¬"

    return False, "ä¿¡å·æœªåè½¬"
```

### 5.2 åˆ†å±‚æ­¢ç›ˆç³»ç»Ÿ

#### 5.2.1 å›ºå®šç›®æ ‡æ­¢ç›ˆ

```python
def calculate_take_profit_levels(entry_price, side, risk_profile="balanced"):
    """
    è®¡ç®—åˆ†å±‚æ­¢ç›ˆç›®æ ‡

    Returns:
        [(price, percentage, reason), ...]
    """
    # æ ¹æ®é£é™©çº§åˆ«è®¾ç½®æ­¢ç›ˆç›®æ ‡
    targets = {
        "conservative": [
            (0.08, 0.40, "ç¬¬ä¸€ç›®æ ‡ +8%ï¼Œæ­¢ç›ˆ40%"),
            (0.12, 0.40, "ç¬¬äºŒç›®æ ‡ +12%ï¼Œæ­¢ç›ˆ40%"),
            (0.18, 0.20, "ç¬¬ä¸‰ç›®æ ‡ +18%ï¼Œæ­¢ç›ˆ20%")
        ],
        "balanced": [
            (0.10, 0.30, "ç¬¬ä¸€ç›®æ ‡ +10%ï¼Œæ­¢ç›ˆ30%"),
            (0.15, 0.40, "ç¬¬äºŒç›®æ ‡ +15%ï¼Œæ­¢ç›ˆ40%"),
            (0.25, 0.30, "ç¬¬ä¸‰ç›®æ ‡ +25%ï¼Œæ­¢ç›ˆ30%")
        ],
        "aggressive": [
            (0.15, 0.25, "ç¬¬ä¸€ç›®æ ‡ +15%ï¼Œæ­¢ç›ˆ25%"),
            (0.25, 0.35, "ç¬¬äºŒç›®æ ‡ +25%ï¼Œæ­¢ç›ˆ35%"),
            (0.40, 0.40, "ç¬¬ä¸‰ç›®æ ‡ +40%ï¼Œæ­¢ç›ˆ40%")
        ]
    }

    levels = []
    for target_pct, position_pct, reason in targets.get(risk_profile, targets["balanced"]):
        if side == "BUY":
            price = entry_price * (1 + target_pct)
        else:  # SELL
            price = entry_price * (1 - target_pct)

        levels.append((price, position_pct, reason))

    return levels
```

#### 5.2.2 é£é™©æ”¶ç›Šæ¯”æ­¢ç›ˆ

```python
def calculate_risk_reward_take_profit(entry_price, stop_loss, side, risk_reward_ratio=3.0):
    """
    æ ¹æ®é£é™©æ”¶ç›Šæ¯”è®¡ç®—æ­¢ç›ˆ

    Args:
        entry_price: å…¥åœºä»·
        stop_loss: æ­¢æŸä»·
        side: "BUY" æˆ– "SELL"
        risk_reward_ratio: é£é™©æ”¶ç›Šæ¯” (é»˜è®¤3:1)

    Returns:
        take_profit_price
    """
    # è®¡ç®—æ­¢æŸè·ç¦»
    stop_loss_distance = abs(entry_price - stop_loss)

    # æ­¢ç›ˆè·ç¦» = æ­¢æŸè·ç¦» Ã— é£é™©æ”¶ç›Šæ¯”
    take_profit_distance = stop_loss_distance * risk_reward_ratio

    if side == "BUY":
        take_profit = entry_price + take_profit_distance
    else:  # SELL
        take_profit = entry_price - take_profit_distance

    return take_profit
```

---

## 6. é£é™©è¯„ä¼°ä¸é¢„è­¦ç³»ç»Ÿ

### 6.1 å®æ—¶é£é™©è¯„åˆ†

```python
def calculate_risk_score(
    signal_divergence,      # ä¿¡å·åˆ†æ­§åº¦ (0-100)
    volatility,             # å¸‚åœºæ³¢åŠ¨ç‡
    volume_anomaly,         # æˆäº¤é‡å¼‚å¸¸
    news_risk,              # æ–°é—»é¢é£é™©
    leverage,               # æ æ†å€æ•°
    position_concentration  # ä»“ä½é›†ä¸­åº¦
):
    """
    è®¡ç®—ç»¼åˆé£é™©è¯„åˆ†

    Returns:
        risk_score (0-100)ï¼Œè¶Šé«˜é£é™©è¶Šå¤§
    """
    risk_score = 0

    # ä¿¡å·åˆ†æ­§ (æƒé‡ 25%)
    risk_score += signal_divergence * 0.25

    # å¸‚åœºæ³¢åŠ¨ç‡ (æƒé‡ 20%)
    if volatility > 0.10:  # æ—¥æ³¢å¹… > 10%
        risk_score += 25
    elif volatility > 0.05:
        risk_score += 12

    # æˆäº¤é‡å¼‚å¸¸ (æƒé‡ 15%)
    if volume_anomaly > 3.0:  # æˆäº¤é‡ > å‡é‡3å€
        risk_score += 15
    elif volume_anomaly < 0.5:  # æˆäº¤é‡ < å‡é‡ä¸€åŠ
        risk_score += 10

    # æ–°é—»é¢é£é™© (æƒé‡ 15%)
    risk_score += news_risk * 0.15

    # æ æ†é£é™© (æƒé‡ 15%)
    if leverage > 5:
        risk_score += 20
    elif leverage > 2:
        risk_score += 10

    # ä»“ä½é›†ä¸­åº¦ (æƒé‡ 10%)
    if position_concentration > 0.5:  # å•å¸ç§ > 50%
        risk_score += 15
    elif position_concentration > 0.3:
        risk_score += 8

    return min(risk_score, 100)
```

### 6.2 é£é™©é¢„è­¦æœºåˆ¶

```python
def risk_alert_system(risk_score, account_drawdown, consecutive_losses):
    """
    é£é™©é¢„è­¦ç³»ç»Ÿ

    Returns:
        alert_level, actions
    """
    alerts = []
    actions = []

    # é£é™©è¯„åˆ†é¢„è­¦
    if risk_score > 80:
        alerts.append("ğŸ”´ æé«˜é£é™©")
        actions.append("ç«‹å³åœæ­¢æ‰€æœ‰äº¤æ˜“")
    elif risk_score > 60:
        alerts.append("ğŸŸ  é«˜é£é™©")
        actions.append("å‡å°‘ä»“ä½è‡³æœ€å¤§ä»“ä½çš„30%")
    elif risk_score > 40:
        alerts.append("ğŸŸ¡ ä¸­ç­‰é£é™©")
        actions.append("è°¨æ…æ“ä½œï¼Œé¿å…åŠ ä»“")

    # è´¦æˆ·å›æ’¤é¢„è­¦
    if account_drawdown > 0.15:
        alerts.append("ğŸ”´ å›æ’¤è¶…è¿‡15%")
        actions.append("æš‚åœäº¤æ˜“ï¼Œåˆ†æåŸå› ")
    elif account_drawdown > 0.10:
        alerts.append("ğŸŸ  å›æ’¤è¶…è¿‡10%")
        actions.append("å‡å°‘ä»“ä½50%")

    # è¿ç»­äºæŸé¢„è­¦
    if consecutive_losses >= 3:
        alerts.append("ğŸ”´ è¿ç»­äºæŸ3æ¬¡ä»¥ä¸Š")
        actions.append("æš‚åœäº¤æ˜“ï¼Œè°ƒæ•´ç­–ç•¥")
    elif consecutive_losses >= 2:
        alerts.append("ğŸŸ  è¿ç»­äºæŸ2æ¬¡")
        actions.append("å‡å°‘ä»“ä½ï¼Œæé«˜ä¿¡å·é˜ˆå€¼")

    # ç¡®å®šæ€»ä½“é£é™©ç­‰çº§
    if "ğŸ”´" in str(alerts):
        alert_level = "CRITICAL"
    elif "ğŸŸ " in str(alerts):
        alert_level = "HIGH"
    elif "ğŸŸ¡" in str(alerts):
        alert_level = "MEDIUM"
    else:
        alert_level = "LOW"

    return alert_level, alerts, actions
```

---

## 7. ç›ˆåˆ©ä¼˜åŒ–ç­–ç•¥

### 7.1 è¶‹åŠ¿è·Ÿéšä¼˜åŒ–

```python
def trend_following_optimization(current_profit_pct, trend_strength, ema_slope):
    """
    è¶‹åŠ¿è·Ÿéšä¼˜åŒ–ï¼šå¼ºè¶‹åŠ¿ä¸­å»¶é•¿æŒä»“

    Args:
        current_profit_pct: å½“å‰ç›ˆåˆ©ç™¾åˆ†æ¯”
        trend_strength: è¶‹åŠ¿å¼ºåº¦ (0-1)
        ema_slope: å‡çº¿æ–œç‡

    Returns:
        should_hold, reason
    """
    # ç›ˆåˆ© > 10% ä¸”è¶‹åŠ¿å¼ºåŠ²
    if current_profit_pct > 0.10 and trend_strength > 0.7:
        if ema_slope > 0.02:  # å‡çº¿æ–œç‡ > 2%
            return True, f"å¼ºåŠ¿ä¸Šå‡è¶‹åŠ¿(æ–œç‡{ema_slope*100:.1f}%)ï¼Œç»§ç»­æŒæœ‰"

    # ç›ˆåˆ© > 5% ä¸”ä¸­ç­‰è¶‹åŠ¿
    elif current_profit_pct > 0.05 and trend_strength > 0.5:
        return True, f"ä¸­ç­‰è¶‹åŠ¿(å¼ºåº¦{trend_strength:.1f})ï¼Œç»§ç»­æŒæœ‰"

    return False, "è¶‹åŠ¿å‡å¼±æˆ–æ— è¶‹åŠ¿"
```

### 7.2 é‡‘å­—å¡”åŠ ä»“

```python
def pyramid_position_adding(
    entry_price,
    current_price,
    current_position_size,
    unrealized_profit_pct,
    signal_score
):
    """
    é‡‘å­—å¡”åŠ ä»“ï¼šç›ˆåˆ©ååœ¨å›è°ƒæ—¶åŠ ä»“

    Args:
        entry_price: é¦–æ¬¡å…¥åœºä»·
        current_price: å½“å‰ä»·
        current_position_size: å½“å‰ä»“ä½
        unrealized_profit_pct: æœªå®ç°ç›ˆåˆ©ç™¾åˆ†æ¯”
        signal_score: å½“å‰ä¿¡å·å¾—åˆ†

    Returns:
        can_add, add_size, add_price_range
    """
    # åªæœ‰ç›ˆåˆ© > 5% æ‰è€ƒè™‘åŠ ä»“
    if unrealized_profit_pct < 0.05:
        return False, 0, None

    # å½“å‰ä»·å›è°ƒè‡³å…¥åœºä»·ä¸Šæ–¹3-5%
    current_profit = (current_price - entry_price) / entry_price

    if 0.03 <= current_profit <= 0.08:
        # ä¿¡å·ä»ç„¶å¼ºåŠ²
        if signal_score > 65:
            # åŠ ä»“è§„æ¨¡ä¸ºåˆå§‹ä»“ä½çš„50%
            add_size = current_position_size * 0.5
            add_price_range = (current_price * 0.98, current_price * 1.02)

            return True, add_size, add_price_range

    return False, 0, None
```

### 7.3 é«˜é¢‘å°å•ç­–ç•¥

```python
def high_frequency_small_orders(
    signal_score,
    signal_volatility,  # ä¿¡å·å¾—åˆ†æ³¢åŠ¨
    time_window="15m"
):
    """
    é«˜é¢‘å°å•ï¼šåœ¨ä¿¡å·é¢‘ç¹å˜åŒ–æ—¶ï¼Œä½¿ç”¨å°ä»“ä½é«˜é¢‘äº¤æ˜“

    Returns:
        use_hf_strategy, position_multiplier
    """
    # ä¿¡å·å¾—åˆ†åœ¨55-65ä¹‹é—´æ³¢åŠ¨ (ä¸å¤Ÿå¼ºï¼Œä½†æœ‰æœºä¼š)
    if 55 <= signal_score <= 65:
        # ä¿¡å·æ³¢åŠ¨è¾ƒå¤§ (è¯´æ˜å¸‚åœºæœ‰æ³¢åŠ¨)
        if signal_volatility > 5:  # å¾—åˆ†æ³¢åŠ¨ > 5
            # ä½¿ç”¨å°ä»“ä½ (æ­£å¸¸ä»“ä½çš„30%)
            return True, 0.30

    return False, 1.0
```

---

## 8. æç«¯è¡Œæƒ…åº”å¯¹

### 8.1 é—ªå´©/æš´æ¶¨æ£€æµ‹

```python
def detect_extreme_movement(price_changes, volume_ratio, time_window="5m"):
    """
    æ£€æµ‹æç«¯ä»·æ ¼å˜åŠ¨

    Args:
        price_changes: æœ€è¿‘Næ ¹Kçº¿çš„ä»·æ ¼å˜åŒ–
        volume_ratio: æˆäº¤é‡å€æ•°
        time_window: æ—¶é—´çª—å£

    Returns:
        is_extreme, movement_type, severity
    """
    # è®¡ç®—çŸ­æœŸä»·æ ¼å˜åŠ¨
    recent_change = sum(price_changes[-5:])  # æœ€è¿‘5æ ¹Kçº¿

    # é—ªå´©æ£€æµ‹ (5åˆ†é’Ÿè·Œå¹… > 5%)
    if recent_change < -0.05 and volume_ratio > 3:
        return True, "FLASH_CRASH", "CRITICAL"

    # æš´æ¶¨æ£€æµ‹ (5åˆ†é’Ÿæ¶¨å¹… > 8%)
    elif recent_change > 0.08 and volume_ratio > 3:
        return True, "PUMP", "HIGH"

    # å¼‚å¸¸æ³¢åŠ¨ (çŸ­æœŸæ³¢åŠ¨ > 3%)
    elif abs(recent_change) > 0.03:
        return True, "VOLATILE", "MEDIUM"

    return False, "NORMAL", "LOW"
```

### 8.2 æç«¯è¡Œæƒ…åº”å¯¹ç­–ç•¥

```python
def extreme_market_response(movement_type, current_position):
    """
    æç«¯è¡Œæƒ…åº”å¯¹

    Returns:
        action, reason
    """
    if movement_type == "FLASH_CRASH":
        if current_position > 0:
            # æŒæœ‰å¤šå• -> ç«‹å³æ­¢æŸ
            return "STOP_LOSS_IMMEDIATELY", "é—ªå´©æ£€æµ‹ï¼Œç«‹å³æ­¢æŸ"
        else:
            # æ— ä»“ä½ -> ç­‰å¾…ä¼ç¨³åæŠ„åº•
            return "WAIT_FOR_STABILIZATION", "ç­‰å¾…ä»·æ ¼ä¼ç¨³åæŠ„åº•"

    elif movement_type == "PUMP":
        if current_position > 0:
            # æŒæœ‰å¤šå• -> åˆ†æ‰¹æ­¢ç›ˆ
            return "TAKE_PROFIT_50%", "æš´æ¶¨æ£€æµ‹ï¼Œå…ˆæ­¢ç›ˆ50%é”å®šåˆ©æ¶¦"
        else:
            # æ— ä»“ä½ -> ä¸è¿½é«˜
            return "DO_NOT_CHASE", "æš´æ¶¨ä¸è¿½é«˜ï¼Œç­‰å¾…å›è°ƒ"

    elif movement_type == "VOLATILE":
        # å¼‚å¸¸æ³¢åŠ¨ -> å‡å°‘ä»“ä½
        return "REDUCE_POSITION", "å¸‚åœºå¼‚å¸¸æ³¢åŠ¨ï¼Œå‡å°‘ä»“ä½"

    return "NORMAL", "æ­£å¸¸äº¤æ˜“"
```

---

## 9. å®æ—¶ç›‘æ§æŒ‡æ ‡

### 9.1 å¿…é¡»ç›‘æ§çš„æ ¸å¿ƒæŒ‡æ ‡

**ç³»ç»Ÿå¿…é¡»æ¯åˆ†é’Ÿç›‘æ§ä»¥ä¸‹æŒ‡æ ‡**:

```python
CORE_MONITORING_METRICS = {
    # ä»·æ ¼ç›¸å…³
    "current_price": "å½“å‰ä»·æ ¼",
    "price_change_1m": "1åˆ†é’Ÿæ¶¨è·Œå¹…",
    "price_change_5m": "5åˆ†é’Ÿæ¶¨è·Œå¹…",
    "price_change_15m": "15åˆ†é’Ÿæ¶¨è·Œå¹…",
    "price_change_1h": "1å°æ—¶æ¶¨è·Œå¹…",

    # æŠ€æœ¯æŒ‡æ ‡
    "rsi_14": "RSI(14)",
    "macd_histogram": "MACDæŸ±çŠ¶å›¾",
    "ema_12_26_cross": "EMA(12/26)äº¤å‰",
    "bollinger_position": "å¸ƒæ—å¸¦ä½ç½®",
    "volume_ratio": "æˆäº¤é‡å€æ•°",

    # èµ„é‡‘é¢
    "funding_rate": "èµ„é‡‘è´¹ç‡",
    "funding_rate_trend": "èµ„é‡‘è´¹ç‡è¶‹åŠ¿",
    "open_interest_change": "æŒä»“é‡å˜åŒ–",

    # èªæ˜é’±
    "hyperliquid_net_flow_1h": "Hyperliquid 1å°æ—¶å‡€æµå…¥",
    "smart_money_long_ratio": "èªæ˜é’±åšå¤šæ¯”ä¾‹",
    "large_transaction_count": "å¤§é¢äº¤æ˜“ç¬”æ•°",

    # è´¦æˆ·é£é™©
    "unrealized_pnl": "æœªå®ç°ç›ˆäº",
    "unrealized_pnl_pct": "æœªå®ç°ç›ˆäºç™¾åˆ†æ¯”",
    "position_size": "æŒä»“è§„æ¨¡",
    "account_drawdown": "è´¦æˆ·å›æ’¤",
    "leverage_ratio": "æ æ†å€æ•°",

    # ä¿¡å·ç›¸å…³
    "comprehensive_score": "ç»¼åˆè¯„åˆ†",
    "signal_consensus": "ä¿¡å·ä¸€è‡´æ€§",
    "risk_score": "é£é™©è¯„åˆ†"
}
```

### 9.2 ç›‘æ§å‘Šè­¦é˜ˆå€¼

```python
ALERT_THRESHOLDS = {
    # æ­¢æŸè§¦å‘
    "unrealized_loss_pct": -0.05,  # æµ®äº > 5%

    # æ­¢ç›ˆè§¦å‘
    "unrealized_profit_pct": 0.15,  # æµ®ç›ˆ > 15%

    # é£é™©é¢„è­¦
    "risk_score": 60,               # é£é™©è¯„åˆ† > 60
    "account_drawdown": 0.10,       # è´¦æˆ·å›æ’¤ > 10%
    "leverage_ratio": 3.0,          # æ æ† > 3å€

    # ä¿¡å·åè½¬
    "score_change": -20,            # ç»¼åˆè¯„åˆ†ä¸‹è·Œ > 20åˆ†
    "bearish_dimensions": 3,        # 3ä¸ªç»´åº¦è½¬ä¸ºçœ‹è·Œ

    # æç«¯è¡Œæƒ…
    "price_change_5m": 0.05,        # 5åˆ†é’Ÿæ¶¨è·Œ > 5%
    "volume_spike": 5.0,            # æˆäº¤é‡æš´å¢ > 5å€

    # èµ„é‡‘è´¹ç‡
    "funding_rate_extreme": 0.001   # èµ„é‡‘è´¹ç‡ > 0.1%
}
```

---

## 10. å®æ–½å»ºè®®

### 10.1 æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆçº§

**é˜¶æ®µ1: åŸºç¡€é£æ§ (æœ€é«˜ä¼˜å…ˆçº§)**
- [x] å›ºå®šç™¾åˆ†æ¯”æ­¢æŸ
- [x] ç¡¬æ€§ä»“ä½é™åˆ¶
- [x] è´¦æˆ·å›æ’¤ç›‘æ§
- [ ] å®æ—¶æ­¢æŸè§¦å‘

**é˜¶æ®µ2: ä¿¡å·ä¼˜åŒ– (é«˜ä¼˜å…ˆçº§)**
- [ ] å¤šç»´åº¦ä¿¡å·ç¡®è®¤
- [ ] å‡ä¿¡å·è¿‡æ»¤
- [ ] ä¿¡å·ä¸€è‡´æ€§æ£€æŸ¥
- [ ] åŠ¨æ€ä»“ä½è°ƒæ•´

**é˜¶æ®µ3: ç›ˆåˆ©ä¼˜åŒ– (ä¸­ä¼˜å…ˆçº§)**
- [ ] åˆ†å±‚æ­¢ç›ˆ
- [ ] ç§»åŠ¨æ­¢æŸ
- [ ] è¶‹åŠ¿è·Ÿéšä¼˜åŒ–
- [ ] é‡‘å­—å¡”åŠ ä»“

**é˜¶æ®µ4: é«˜çº§åŠŸèƒ½ (ä½ä¼˜å…ˆçº§)**
- [ ] æç«¯è¡Œæƒ…æ£€æµ‹
- [ ] é«˜é¢‘å°å•ç­–ç•¥
- [ ] å‡¯åˆ©å…¬å¼ä¼˜åŒ–
- [ ] èµ„é‡‘è´¹ç‡å¥—åˆ©

### 10.2 æµ‹è¯•éªŒè¯è®¡åˆ’

**å›æµ‹æµ‹è¯•**:
1. å†å²æ•°æ®å›æµ‹ (è‡³å°‘6ä¸ªæœˆ)
2. ä¸åŒå¸‚åœºç¯å¢ƒæµ‹è¯• (ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡å¸‚)
3. æç«¯è¡Œæƒ…æµ‹è¯• (2020å¹´3æœˆ/2021å¹´5æœˆ)

**æ¨¡æ‹Ÿæµ‹è¯•**:
1. çº¸ä¸Šäº¤æ˜“éªŒè¯ (è‡³å°‘1ä¸ªæœˆ)
2. å°èµ„é‡‘å®ç›˜æµ‹è¯• (1-2å‘¨)
3. é€æ­¥æ”¾å¤§èµ„é‡‘è§„æ¨¡

**æ€§èƒ½æŒ‡æ ‡**:
- å¹´åŒ–æ”¶ç›Šç‡ > 30%
- æœ€å¤§å›æ’¤ < 15%
- å¤æ™®æ¯”ç‡ > 1.5
- èƒœç‡ > 55%
- ç›ˆäºæ¯” > 2:1

---

## æ€»ç»“

**æœ€å¤§ç›ˆåˆ©çš„å…³é”®**:
1. âœ… åªåšé«˜ç¡®å®šæ€§æœºä¼š (ç»¼åˆå¾—åˆ† > 75)
2. âœ… è®©åˆ©æ¶¦å¥”è·‘ (ç§»åŠ¨æ­¢æŸ + è¶‹åŠ¿è·Ÿéš)
3. âœ… åˆ†å±‚æ­¢ç›ˆ (ä¿æŠ¤éƒ¨åˆ†åˆ©æ¶¦)
4. âœ… é‡‘å­—å¡”åŠ ä»“ (ç›ˆåˆ©ååŠ ä»“)

**æœ€å°é£é™©çš„å…³é”®**:
1. âœ… ä¸¥æ ¼æ­¢æŸ (å•ç¬” < 5%)
2. âœ… ä»“ä½æ§åˆ¶ (å•ç¬” < 30%)
3. âœ… å¤šé‡ç¡®è®¤ (è‡³å°‘3ä¸ªç»´åº¦åŒæ„)
4. âœ… å›æ’¤ä¿æŠ¤ (å›æ’¤ > 10%ç«‹å³å‡ä»“)

**æ ¸å¿ƒç†å¿µ**:
> "æ§åˆ¶é£é™©ï¼Œè®©ç›ˆåˆ©è‡ªç„¶è€Œæ¥"

---

**æ–‡æ¡£ç»“æŸ**
