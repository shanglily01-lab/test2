
                            <!-- 反向操作策略配置 ⚡ 新增 -->
                            <div class="form-group" style="margin-bottom: 20px; padding: 16px; background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(234, 179, 8, 0.1)); border-radius: var(--radius-lg); border-left: 4px solid var(--secondary-orange);">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <i class="bi bi-arrow-left-right" style="color: var(--secondary-orange); font-size: 18px;"></i>
                                        <span style="font-weight: 700; font-size: 14px; color: var(--secondary-orange);">🔄 反向操作策略（震荡市神器）</span>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" id="contrarianEnabled" onchange="toggleContrarianConfig()">
                                        <span class="slider round"></span>
                                    </label>
                                </div>

                                <small style="color: var(--text-secondary); font-size: 12px; line-height: 1.6; display: block; margin-bottom: 12px;">
                                    当检测到V3信号时，反向开仓，利用震荡市均值回归特性获利<br>
                                    <span style="color: var(--success-green); font-weight: 600;">✅ 数据验证：反向操作胜率94.7% vs 趋势跟随5.3%（2026-01-17）</span>
                                </small>

                                <!-- 反向操作详细配置 -->
                                <div id="contrarianConfigPanel" style="display: none; margin-top: 12px; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px;">

                                    <!-- 市场环境模式 -->
                                    <div class="form-group" style="margin-bottom: 12px;">
                                        <label class="form-label" style="font-size: 12px; margin-bottom: 6px;">市场环境检测模式</label>
                                        <div class="radio-group" style="flex-direction: row; gap: 8px; flex-wrap: wrap;">
                                            <div class="radio-option" style="padding: 6px 12px;">
                                                <input type="radio" id="marketRegimeAuto" name="marketRegime" value="auto_detect" checked onchange="toggleMarketDetectionConfig()">
                                                <label for="marketRegimeAuto" class="radio-label" style="font-size: 11px;">
                                                    <i class="bi bi-gear-fill"></i> 自动检测（推荐）
                                                </label>
                                            </div>
                                            <div class="radio-option" style="padding: 6px 12px;">
                                                <input type="radio" id="marketRegimeAlways" name="marketRegime" value="always_contrarian" onchange="toggleMarketDetectionConfig()">
                                                <label for="marketRegimeAlways" class="radio-label" style="font-size: 11px;">
                                                    <i class="bi bi-arrow-left-right"></i> 强制反向
                                                </label>
                                            </div>
                                            <div class="radio-option" style="padding: 6px 12px;">
                                                <input type="radio" id="marketRegimeNever" name="marketRegime" value="never_contrarian" onchange="toggleMarketDetectionConfig()">
                                                <label for="marketRegimeNever" class="radio-label" style="font-size: 11px;">
                                                    <i class="bi bi-arrow-up-right"></i> 禁用反向
                                                </label>
                                            </div>
                                        </div>
                                        <small style="color: var(--text-tertiary); font-size: 10px; display: block; margin-top: 4px;">
                                            自动检测：系统根据最近24h交易数据判断是否震荡市，自动切换策略
                                        </small>
                                    </div>

                                    <!-- 市场检测参数（仅自动模式显示） -->
                                    <div id="marketDetectionPanel" style="margin-bottom: 12px;">
                                        <label class="form-label" style="font-size: 12px; margin-bottom: 6px;">市场检测参数</label>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                            <div>
                                                <label style="font-size: 10px; color: var(--text-secondary);">回溯时长（小时）</label>
                                                <input type="number" id="lookbackHours" class="form-input" style="padding: 6px; font-size: 12px;" value="24" min="12" max="72">
                                            </div>
                                            <div>
                                                <label style="font-size: 10px; color: var(--text-secondary);">最小交易数</label>
                                                <input type="number" id="minTrades" class="form-input" style="padding: 6px; font-size: 12px;" value="10" min="5" max="50">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 反向操作风险参数 -->
                                    <div class="form-group" style="margin-bottom: 8px;">
                                        <label class="form-label" style="font-size: 12px; margin-bottom: 6px;">反向操作风险参数（更保守）</label>
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                            <div>
                                                <label style="font-size: 10px; color: var(--text-secondary);">止损(%)</label>
                                                <input type="number" id="contrarianStopLoss" class="form-input" style="padding: 6px; font-size: 12px;" value="1.5" step="0.1">
                                            </div>
                                            <div>
                                                <label style="font-size: 10px; color: var(--text-secondary);">止盈(%)</label>
                                                <input type="number" id="contrarianTakeProfit" class="form-input" style="padding: 6px; font-size: 12px;" value="1.0" step="0.1">
                                            </div>
                                            <div>
                                                <label style="font-size: 10px; color: var(--text-secondary);">限价单偏移(%)</label>
                                                <input type="number" id="contrarianLimitOffset" class="form-input" style="padding: 6px; font-size: 12px;" value="0.5" step="0.1">
                                            </div>
                                        </div>
                                    </div>

                                    <small style="color: var(--warning-yellow); font-size: 10px; display: flex; align-items: center; gap: 4px;">
                                        <i class="bi bi-exclamation-triangle-fill"></i>
                                        反向操作在趋势市可能亏损，建议启用自动检测模式
                                    </small>
                                </div>
                            </div>
