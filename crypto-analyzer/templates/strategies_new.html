<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投资策略分析 - Crypto Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f35 100%);
            color: #e0e0e0;
            line-height: 1.6;
            min-height: 100vh;
        }

        .navbar {
            background: rgba(20, 25, 45, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #e0e0e0;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }

        .nav-links a:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .nav-links a.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem 0;
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-header p {
            color: #a0a0a0;
            font-size: 1.1rem;
        }

        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .strategy-card {
            background: rgba(30, 35, 55, 0.6);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .strategy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .strategy-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .strategy-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #667eea;
        }

        .strategy-status {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .status-inactive {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .strategy-description {
            color: #b0b0b0;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .strategy-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .metric {
            background: rgba(20, 25, 45, 0.5);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .metric-label {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 0.3rem;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #e0e0e0;
        }

        .metric-value.positive {
            color: #10b981;
        }

        .metric-value.negative {
            color: #ef4444;
        }

        .analysis-section {
            background: rgba(30, 35, 55, 0.6);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #667eea;
            font-weight: 600;
        }

        .recommendation-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .recommendation-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 0.8rem;
        }

        .recommendation-text {
            color: #c0c0c0;
            line-height: 1.7;
        }

        .risk-indicator {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 1rem;
        }

        .risk-low {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .risk-medium {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .risk-high {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .strategy-grid {
                grid-template-columns: 1fr;
            }

            .page-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">Crypto Analyzer</div>
            <ul class="nav-links">
                <li><a href="/">主页</a></li>
                <li><a href="/dashboard_new">仪表板</a></li>
                <li><a href="/contract_trading_new">合约交易</a></li>
                <li><a href="/strategies" class="active">投资策略</a></li>
                <li><a href="/etf_data">ETF数据</a></li>
                <li><a href="/corporate_treasury">企业金库</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>投资策略分析</h1>
            <p>智能量化策略 · 风险评估 · 收益优化</p>
        </div>

        <div class="strategy-grid">
            <div class="strategy-card">
                <div class="strategy-header">
                    <div class="strategy-title">趋势跟踪策略</div>
                    <span class="strategy-status status-active">运行中</span>
                </div>
                <div class="strategy-description">
                    基于移动平均线和动量指标，捕捉中长期市场趋势。适合波动较大的加密货币市场，通过技术分析识别买卖信号。
                </div>
                <div class="strategy-metrics">
                    <div class="metric">
                        <div class="metric-label">年化收益率</div>
                        <div class="metric-value positive">+28.5%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">最大回撤</div>
                        <div class="metric-value negative">-15.2%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">夏普比率</div>
                        <div class="metric-value">1.85</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">胜率</div>
                        <div class="metric-value">62%</div>
                    </div>
                </div>
            </div>

            <div class="strategy-card">
                <div class="strategy-header">
                    <div class="strategy-title">网格交易策略</div>
                    <span class="strategy-status status-active">运行中</span>
                </div>
                <div class="strategy-description">
                    在震荡行情中表现优异，通过设置价格网格进行高抛低吸。自动化执行交易，降低人为情绪干扰。
                </div>
                <div class="strategy-metrics">
                    <div class="metric">
                        <div class="metric-label">年化收益率</div>
                        <div class="metric-value positive">+18.3%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">最大回撤</div>
                        <div class="metric-value negative">-8.7%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">夏普比率</div>
                        <div class="metric-value">2.15</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">胜率</div>
                        <div class="metric-value">68%</div>
                    </div>
                </div>
            </div>

            <div class="strategy-card">
                <div class="strategy-header">
                    <div class="strategy-title">套利策略</div>
                    <span class="strategy-status status-inactive">暂停</span>
                </div>
                <div class="strategy-description">
                    利用不同交易所之间的价格差异进行套利交易。低风险策略，但需要快速执行和充足的流动性支持。
                </div>
                <div class="strategy-metrics">
                    <div class="metric">
                        <div class="metric-label">年化收益率</div>
                        <div class="metric-value positive">+12.8%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">最大回撤</div>
                        <div class="metric-value negative">-3.2%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">夏普比率</div>
                        <div class="metric-value">2.95</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">胜率</div>
                        <div class="metric-value">78%</div>
                    </div>
                </div>
            </div>

            <div class="strategy-card">
                <div class="strategy-header">
                    <div class="strategy-title">均值回归策略</div>
                    <span class="strategy-status status-active">运行中</span>
                </div>
                <div class="strategy-description">
                    基于价格偏离均值后的回归特性。通过统计分析识别超买超卖区域，适合波动性较高的短期交易。
                </div>
                <div class="strategy-metrics">
                    <div class="metric">
                        <div class="metric-label">年化收益率</div>
                        <div class="metric-value positive">+22.1%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">最大回撤</div>
                        <div class="metric-value negative">-11.5%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">夏普比率</div>
                        <div class="metric-value">1.92</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">胜率</div>
                        <div class="metric-value">65%</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <h2 class="section-title">市场分析与建议</h2>

            <div class="recommendation-box">
                <div class="recommendation-title">
                    当前市场环境 <span class="risk-indicator risk-medium">中等风险</span>
                </div>
                <div class="recommendation-text">
                    市场目前处于震荡调整阶段，波动率较前期有所下降。建议采用网格交易策略或均值回归策略，避免过度追涨杀跌。
                    密切关注宏观经济数据和监管政策变化，适时调整仓位配置。
                </div>
            </div>

            <div class="recommendation-box">
                <div class="recommendation-title">
                    策略组合建议 <span class="risk-indicator risk-low">低风险</span>
                </div>
                <div class="recommendation-text">
                    推荐组合配置：60%网格交易策略 + 30%趋势跟踪策略 + 10%套利策略。
                    这种组合可以在不同市场环境下保持相对稳定的收益，同时将最大回撤控制在可接受范围内。
                    定期（每月）进行策略表现评估和再平衡。
                </div>
            </div>

            <div class="recommendation-box">
                <div class="recommendation-title">
                    风险控制要点 <span class="risk-indicator risk-high">高度重视</span>
                </div>
                <div class="recommendation-text">
                    严格执行止损策略，单笔交易最大损失不超过总资金的2%。
                    避免在重大新闻事件前后进行高杠杆交易。
                    保持合理的仓位管理，总持仓不超过可用资金的70%，预留充足的流动性应对突发情况。
                </div>
            </div>
        </div>
    </div>

    <script>
        // 加载策略分析数据
        async function loadStrategyAnalysis() {
            try {
                const response = await fetch('/api/investment/analysis');
                const data = await response.json();

                if (data.success) {
                    updateScores(data.data.scores || {});
                    updateRecommendation(data.data.recommendation || {});
                    updateFactors(data.data.factors || {});
                }
            } catch (error) {
                console.error('加载策略分析失败:', error);
            }
        }

        // 更新评分
        function updateScores(scores) {
            const scoreCards = document.querySelectorAll('.score-card');

            // 技术指标
            if (scoreCards[0]) {
                const techScore = scores.technical || 50;
                scoreCards[0].querySelector('.score-value').textContent = techScore;
                scoreCards[0].querySelector('.score-bar-fill').style.width = techScore + '%';
                scoreCards[0].querySelector('.score-bar-fill').className =
                    'score-bar-fill ' + getScoreClass(techScore);
            }

            // 链上数据
            if (scoreCards[1]) {
                const onChainScore = scores.on_chain || 50;
                scoreCards[1].querySelector('.score-value').textContent = onChainScore;
                scoreCards[1].querySelector('.score-bar-fill').style.width = onChainScore + '%';
                scoreCards[1].querySelector('.score-bar-fill').className =
                    'score-bar-fill ' + getScoreClass(onChainScore);
            }

            // 市场情绪
            if (scoreCards[2]) {
                const sentimentScore = scores.sentiment || 50;
                scoreCards[2].querySelector('.score-value').textContent = sentimentScore;
                scoreCards[2].querySelector('.score-bar-fill').style.width = sentimentScore + '%';
                scoreCards[2].querySelector('.score-bar-fill').className =
                    'score-bar-fill ' + getScoreClass(sentimentScore);
            }

            // 资金流动
            if (scoreCards[3]) {
                const flowScore = scores.capital_flow || 50;
                scoreCards[3].querySelector('.score-value').textContent = flowScore;
                scoreCards[3].querySelector('.score-bar-fill').style.width = flowScore + '%';
                scoreCards[3].querySelector('.score-bar-fill').className =
                    'score-bar-fill ' + getScoreClass(flowScore);
            }
        }

        // 获取评分颜色类
        function getScoreClass(score) {
            if (score >= 70) return 'score-high';
            if (score >= 40) return 'score-medium';
            return 'score-low';
        }

        // 更新投资建议
        function updateRecommendation(recommendation) {
            const recCard = document.querySelector('.recommendation-card');
            if (!recCard) return;

            const signal = recommendation.signal || 'HOLD';
            const signalText = {
                'STRONG_BUY': '强烈买入',
                'BUY': '买入',
                'HOLD': '持有',
                'SELL': '卖出',
                'STRONG_SELL': '强烈卖出'
            }[signal] || '持有';

            const signalClass = {
                'STRONG_BUY': 'signal-strong-buy',
                'BUY': 'signal-buy',
                'HOLD': 'signal-hold',
                'SELL': 'signal-sell',
                'STRONG_SELL': 'signal-strong-sell'
            }[signal] || 'signal-hold';

            recCard.querySelector('.recommendation-signal').textContent = signalText;
            recCard.querySelector('.recommendation-signal').className =
                'recommendation-signal ' + signalClass;

            if (recommendation.advice) {
                recCard.querySelector('.recommendation-desc').textContent = recommendation.advice;
            }
        }

        // 更新影响因素
        function updateFactors(factors) {
            const factorsList = document.querySelector('.factors-list');
            if (!factorsList || !factors.positive && !factors.negative) return;

            let html = '';

            if (factors.positive && factors.positive.length > 0) {
                factors.positive.forEach(factor => {
                    html += `
                        <div class="factor-item factor-positive">
                            <span class="factor-icon">✓</span>
                            <span class="factor-text">${factor}</span>
                        </div>
                    `;
                });
            }

            if (factors.negative && factors.negative.length > 0) {
                factors.negative.forEach(factor => {
                    html += `
                        <div class="factor-item factor-negative">
                            <span class="factor-icon">✗</span>
                            <span class="factor-text">${factor}</span>
                        </div>
                    `;
                });
            }

            if (html) {
                factorsList.innerHTML = html;
            }
        }

        // 页面加载时执行
        document.addEventListener('DOMContentLoaded', function() {
            loadStrategyAnalysis();
            // 每60秒更新一次
            setInterval(loadStrategyAnalysis, 60000);
        });
    </script>
</body>
</html>