# LONG方向评分阈值优化方案

## 📊 问题诊断 (2026-02-09)

### 数据分析结果 (最近24小时)

| 指标 | LONG | SHORT | 差距 |
|------|------|-------|------|
| 交易笔数 | 43笔 | 116笔 | SHORT多2.7倍 |
| 胜率 | 48.84% | **68.10%** | SHORT高19.26% |
| 平均评分 | 22.86 | 24.66 | SHORT高1.8分 |
| 总盈亏 | **-620.81U** | **+162.17U** | 相差783U |
| 平均盈亏 | -14.44U | +1.40U | LONG亏10倍 |

### 核心问题

1. **LONG评分区分度极低**
   - 盈利单平均评分: 22.95
   - 亏损单平均评分: 22.77
   - **评分差异仅0.18分** ← 评分系统对LONG几乎无效!

2. **SHORT评分区分度正常**
   - 盈利单平均评分: 25.29
   - 亏损单平均评分: 23.32
   - 评分差异1.97分 ← 有效性高10倍

3. **LONG在各评分段均亏损**

| 评分区间 | LONG表现 | SHORT表现 |
|----------|----------|-----------|
| < 20分 | 1笔, 0%胜率, -20U | 17笔, 47%胜率, -314U |
| 20-25分 | 30笔, 46.67%胜率, **-487U** | 46笔, 65.22%胜率, **+121U** |
| 25-30分 | 12笔, 58.33%胜率, **-114U** | 32笔, 75%胜率, **+116U** |
| ≥30分 | **0笔** | 21笔, 80.95%胜率, **+238U** |

**关键发现**:
- LONG没有任何30分以上的信号
- 72%的LONG亏损集中在20-25分
- 即使25-30分的LONG仍亏损-114U

---

## 🔧 优化方案: 差异化评分阈值

### 实施内容

修改 `app/strategies/signal_scorer_v3.py`:

```python
# 🔥 差异化阈值 (2026-02-09优化)
self.min_score_long = 28   # LONG要求28分以上
self.min_score_short = 22  # SHORT保持22分
```

### 判断逻辑

```python
if position_side == 'LONG':
    threshold = self.min_score_long  # 28分
else:  # SHORT
    threshold = self.min_score_short  # 22分

can_trade = total_score >= threshold
```

---

## 📈 预期效果

### LONG方向 (阈值28分)

**优化前** (阈值18分):
- 43笔交易
- 48.84%胜率
- 总亏损-620.81U
- 平均亏损-14.44U

**优化后** (阈值28分):
- 预计5笔交易 (减少88%)
- 预计60%胜率 (提升11%)
- 预计亏损-74U (减少88%)
- 平均亏损-14.79U

### SHORT方向 (阈值22分)

保持原有表现:
- 阈值从18分提高到22分
- 交易数从116笔降至93笔 (减少20%)
- 总盈利从+162U提升至+559U (增长245%)
- 胜率从68.10%提升至73.12%

### 整体效果

**优化前**:
- 总盈亏: -620.81U + 162.17U = **-458.64U**

**优化后** (预估):
- LONG: -74U
- SHORT: +559U
- 总盈亏: **+485U** (扭亏为盈!)

---

## ⚠️ 注意事项

### 1. 临时措施
这是基于24小时数据的**临时优化措施**,需要观察1-2天效果。

### 2. 监控指标
- LONG开仓数量 (预计大幅减少)
- LONG胜率 (预计提升到60%+)
- 28分以上LONG信号的实际盈亏

### 3. 后续优化方向

**如果效果不佳** (28分LONG仍亏损):
- 考虑引入V2的72H位置评分
- 暂停所有LONG信号,只做SHORT
- 重新设计LONG评分系统

**如果效果良好** (28分LONG盈利):
- 保持28分阈值
- 分析28分以上LONG的共同特征
- 优化评分权重让更多信号达到28分

### 4. V2+V3融合方案

考虑引入V2的72H位置评分作为LONG的额外条件:
- LONG要求: V3评分≥28分 **AND** 72H位置<30% (低位)
- SHORT保持: V3评分≥22分

这可能将LONG胜率提升到70%+

---

## 📝 版本记录

### v1.0 (2026-02-09)
- 初始优化: LONG阈值28分, SHORT阈值22分
- 原因: LONG在20-25分段亏损-487U
- 预期: 减少低质量LONG信号,提升整体盈利

---

## 🔄 回滚方案

如果优化效果不理想,可以快速回滚:

```python
# 回滚到统一阈值
self.min_score_long = 18   # 恢复18分
self.min_score_short = 18  # 恢复18分
```

或者关闭差异化:

```python
# 判断逻辑改回统一阈值
threshold = self.min_score_to_trade  # 18分
can_trade = total_score >= threshold
```

---

**实施日期**: 2026-02-09
**负责人**: 超级大脑优化团队
**状态**: ✅ 已实施,观察中
